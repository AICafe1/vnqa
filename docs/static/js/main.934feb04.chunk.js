(this.webpackJsonpvnqa=this.webpackJsonpvnqa||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),l=window.dfd,i=l.Series,c=l.DataFrame,s=function(){function e(t,a){Object(n.a)(this,e),this.index=t.index,this.series=[];for(var r=0,l=t.index.length;r<l;)++r<a?this.series.push(NaN):this.series.push(t.iloc(["".concat(r-a,":").concat(r)]))}return Object(r.a)(e,[{key:"apply",value:function(e){return new i(this.series.map((function(t){return t&&e(t)})),{index:this.index})}}]),e}();i.prototype.rolling=function(e){return new s(this,e)};var o=function(){function e(t,a){Object(n.a)(this,e),this.index=t.index,this.columns=t.columns,this.dtypes=t.dtypes,this.df=[];for(var r=0,l=t.index.length;r<l;)++r<a?this.df.push(NaN):this.df.push(t.iloc({rows:["".concat(r-a,":").concat(r)]}))}return Object(r.a)(e,[{key:"apply",value:function(e){var t=this.columns.map((function(){return NaN}));return new c(this.df.map((function(a){return a?e(a):t})),{index:this.index,columns:this.columns,dtypes:this.dtypes})}}]),e}();c.prototype.rolling=function(e){return new o(this,e)}},101:function(e,t){window.dfd.Series.prototype.dropnall=function(e){for(var t=this.values,a=this.index,n=[],r=[],l=0,i=t.length;l<i;l++){var c=t[l];isNaN(c)||null===c||void 0===c||(n.push(c),r.push(a[l]))}if(e.inplace)return this.$setValues(n,!1),this.$setIndex(r),this;var s=this.copy();return s.$setValues(n,!1),s.$setIndex(r),s}},117:function(e,t,a){},118:function(e,t,a){},210:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),l=a(4),i=a(3),c=a(0),s=a.n(c),o=a(23),u=a(11),m=a(25),d=a.n(m),h=(a(98),a(99),window.wp);function p(){return"subscriber"!==h.role}function v(){if(h.hasOwnProperty("videos"))return h.videos;try{var e=JSON.parse(h.page);e.yt&&e.yt.length?h.videos=e.yt.filter((function(e){return e[1]})):h.videos=!1}catch(t){h.videos=!1}return h.videos}function f(){return!!v()&&"Video "+h.role}function g(e){return e&&"aicafe_one_logged_out"===e.code?window.location.reload():e}function b(e){return fetch("".concat(h.api).concat(e).concat(-1===e.indexOf("?")?"?":"&","_wpnonce=").concat(h.nonce)).then((function(e){return e.json()})).then(g)}function y(e,t){return fetch("".concat(h.api).concat(e).concat(-1===e.indexOf("?")?"?":"&","_wpnonce=").concat(h.nonce),{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then(g)}window.wp=void 0,h.role||(window.location.href=h.url||"https://aicafe.one/vnqa",exit());var E,w,x,k,N=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return p()?null:s.a.createElement("i",{className:"bi bi-file-lock text-danger",style:{float:"right"}})}}]),a}(s.a.Component),j=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.com;return p()?s.a.createElement(e,this.props):s.a.createElement("div",{className:"my-5 py-5"},s.a.createElement("center",{className:"my-5"},s.a.createElement("h5",{className:"my-3"},"T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n kh\xf4ng th\u1ec3 truy c\u1eadp t\xednh n\u0103ng n\xe0y"),s.a.createElement("h4",null,"Vui l\xf2ng li\xean h\u1ec7 ",s.a.createElement("a",{href:"https://aicafe.one"},"AI Cafe\xb9")," \u0111\u1ec3 n\xe2ng c\u1ea5p t\xe0i kho\u1ea3n")))}}]),a}(s.a.Component),O=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={user:E||{}},E||b("wp/v2/users/me").then((function(e){E={name:e.name,avatar:e.avatar_urls[48]},r.setState({user:E})})),r}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"dropdown"},s.a.createElement("div",{className:"d-flex align-items-center link-".concat(this.props.light?"dark":"light"," ").concat(this.props.expand?"dropdown-toggle":"px-2"," show"),role:"button",onClick:function(){return e.setState({show:!e.state.show})}},s.a.createElement("img",{src:this.state.user.avatar,alt:"avatar",width:32,height:32,className:"rounded-circle me-2"}),this.props.expand&&s.a.createElement("strong",null,this.state.user.name)),s.a.createElement("ul",{className:"dropdown-menu text-small shadow",style:{display:this.state.show?"block":"none",bottom:"40px"}},s.a.createElement("li",null,s.a.createElement("a",{className:"dropdown-item",href:h.api.replace("json/","admin/profile.php")},"Trang c\xe1 nh\xe2n")),s.a.createElement("li",null,s.a.createElement("hr",{className:"dropdown-divider"})),s.a.createElement("li",null,s.a.createElement("a",{className:"dropdown-item",href:h.url.replace(/&amp;/g,"&")},"\u0110\u0103ng xu\u1ea5t"))))}}]),a}(s.a.Component),S=a(14);if(h.hasOwnProperty("vnqa"))try{w=h.vnqa?JSON.parse(h.vnqa):{},delete h.vnqa}catch(ga){w={}}var C={arrayMerge:function(e,t){return t}};function M(e){return w=window.deepmerge(w,e,C),k&&clearTimeout(k),k=setTimeout((function(){return y("aicafe/v1/app/vnqa",w)}),9e3),w}var T=!document.getElementById("df"),F=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentWillUnmount",value:function(){this.lazy&&clearTimeout(this.lazy)}},{key:"setStateLazy",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;this.lazy&&clearTimeout(this.lazy),this.lazyState=this.lazyState?Object.assign(this.lazyState,e):e,this.lazy=setTimeout((function(){t.setState(t.lazyState),t.lazyState=!1}),a)}},{key:"getSettings",value:function(e,t){T&&(w?new Promise((function(e){return e(w)})):(x||(x=b("aicafe/v1/app/vnqa").then((function(e){return w=Array.isArray(e)?{}:e})).catch((function(){return w={}}))),x)).then((function(a){return t(e?a[e]:a)}))}},{key:"getSettingsSync",value:function(e){return T&&(e?w&&w[e]:w)}},{key:"saveSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T&&M(e)}}]),a}(s.a.Component),D=window.dfd.DataFrame,P=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={ticker:"",window:20},r.getSettingsSync()?(r.state.ticker=r.getSettingsSync(r.getKey())||r.state.ticker,r.state.window=r.getSettingsSync("window")||r.state.window):r.getSettings(!1,(function(e){if(r.props.df instanceof D){var t=e[r.getKey()];t&&t!==r.state.ticker&&r.setState({ticker:t})}e.window&&e.window!==r.state.window&&r.setState({window:e.window})})),r}return Object(r.a)(a,[{key:"getKey",value:function(){return this.props.df.hasOwnProperty("VNINDEX")?"idx":"ticker"}},{key:"changeTicker",value:function(e){this.state.ticker!==e&&(this.saveSettings(Object(S.a)({},this.getKey(),e)),this.setState({ticker:e}))}},{key:"changeWindow",value:function(e){e=(e=parseInt(e.target.value))>1?e:this.state.window,this.saveSettings({window:e}),this.setState({window:e})}}]),a}(F),q=a(15);function I(e,t,a,n,r){if(r-2<n)return e[n]===t?n+a:e[r]===t?r+a:t<e[n]?n:r;var l=n+r>>1;return t<e[l]?I(e,t,a,n,l):e[l]<t?I(e,t,a,l,r):l+a}var z=function(e,t){var a=document.getElementById(e);a.plotZoom||(a.plotZoom=function(t){var n=Object.keys(t);if(!n.find((function(e){return"y"===e[0]}))){if(!n.find((function(e){return e.startsWith("xaxis.range")||e.startsWith("xaxis.autorange")})))return;var r={},l=a.layout.xaxis.range;a._fullLayout.xaxis._counterAxes.forEach((function(e){var t="yaxis"+e.slice(1),n="log"===a.layout[t].type,i=a._fullLayout[t]._traceIndices.map((function(e){var t=a.data[e],n=I(t.x,l[0],!1,0,t.x.length),r=I(t.x,l[1],!0,n,t.x.length);if(n<r){var i=t.y.slice(n,r).filter((function(e){return!isNaN(e)}));return[Math.min.apply(Math,Object(q.a)(i)),Math.max.apply(Math,Object(q.a)(i))]}return!1})).filter((function(e){return!!e}));if(i.length){var c=Math.min.apply(Math,Object(q.a)(i.map((function(e){return e[0]})))),s=Math.max.apply(Math,Object(q.a)(i.map((function(e){return e[1]}))));r["".concat(t,".range[0]")]=n?Math.log10(c):c,r["".concat(t,".range[1]")]=n?Math.log10(s):s}})),window.Plotly.relayout(e,r)}}),a.on("plotly_relayout",a.plotZoom),!t||a.on("plotly_legendclick",t)};function L(e,t){for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];"object"===typeof n&&e.hasOwnProperty(a)?L(e[a],n):e[a]=n}return e}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={margin:{l:40,r:8,b:32,t:40,pad:0}};return window.innerWidth<768&&(t.dragmode=!1),"dark"===document.querySelector("html").dataset.bsTheme&&(t.template={layout:{paper_bgcolor:"#212529",plot_bgcolor:"#212529",font:{color:"#f2f5fa"},xaxis:{gridcolor:"#283442"},yaxis:{gridcolor:"#283442",fixedrange:!0}}}),L(t,e)}var A=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.df,n=e.columns;n||(n=a.columns);for(var r=[{x:a[n[0]].index,y:a[n[0]].values,name:n[0]}],l=[["xy"]],i=n.length-1,c=1;c<=i;c++){var s=c===i?c:c+1;r.push({x:a[n[c]].index,y:a[n[c]].values,name:n[c],xaxis:"x",yaxis:"y".concat(s)}),l.push(["xy".concat(s)])}window.Plotly.newPlot(t,r,V({xaxis:{showspikes:!0,spikemode:"toaxis+across+marker",spikesnap:"cursor"},yaxis:{type:"log"},grid:{rows:i,columns:1,subplots:l},showlegend:!1})),z(t)}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id})}}]),a}(s.a.Component),_=a(21),R=a(78),W=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=Object(_.a)({},this.props);return e.options=e.options.map((function(t){return e.value===t?(e.value={value:t,label:t},e.value):{value:t,label:t}})),s.a.createElement(R.a,Object.assign({},e,{classNamePrefix:"vnqa"}))}}]),a}(s.a.Component),B=window.jStat;function H(e){for(var t=0,a=0,n=0,r=e.length;n<r;n++){var l=e[n];if(l<a){var i=(a-l)/a;i>t&&(t=i)}else a=l}return 100*t}function U(e){for(var t,a=0,n=0,r=0,l=e.length;r<l;r++){var i=e[r];i<n?t++:(t>a&&(a=t),n=i,t=0)}return t>a&&(a=t),a}function $(e){var t=B.mean(e);return Math.sqrt(e.reduce((function(e,a){return a<0?e+Math.pow(t+a,2):e}),0)/e.length)}var K=a(9),G=a(53),J=a.n(G),Q=(a(117),function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,n={},r={util:{encode:function e(t){return t instanceof l?new l(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++a}),e.__id},clone:function e(t,a){var n,l;switch(a=a||{},r.util.type(t)){case"Object":if(l=r.util.objId(t),a[l])return a[l];for(var i in n={},a[l]=n,t)t.hasOwnProperty(i)&&(n[i]=e(t[i],a));return n;case"Array":return l=r.util.objId(t),a[l]?a[l]:(n=[],a[l]=n,t.forEach((function(t,r){n[r]=e(t,a)})),n);default:return t}},getLanguage:function(e){for(;e;){var a=t.exec(e.className);if(a)return a[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,a){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+a)},currentScript:function(){if("undefined"===typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(n){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(n.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var a in t)if(t[a].src==e)return t[a]}return null}},isActive:function(e,t,a){for(var n="no-"+t;e;){var r=e.classList;if(r.contains(t))return!0;if(r.contains(n))return!1;e=e.parentElement}return!!a}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(e,t){var a=r.util.clone(r.languages[e]);for(var n in t)a[n]=t[n];return a},insertBefore:function(e,t,a,n){var l=(n=n||r.languages)[e],i={};for(var c in l)if(l.hasOwnProperty(c)){if(c==t)for(var s in a)a.hasOwnProperty(s)&&(i[s]=a[s]);a.hasOwnProperty(c)||(i[c]=l[c])}var o=n[e];return n[e]=i,r.languages.DFS(r.languages,(function(t,a){a===o&&t!=e&&(this[t]=i)})),i},DFS:function e(t,a,n,l){l=l||{};var i=r.util.objId;for(var c in t)if(t.hasOwnProperty(c)){a.call(t,c,t[c],n||c);var s=t[c],o=r.util.type(s);"Object"!==o||l[i(s)]?"Array"!==o||l[i(s)]||(l[i(s)]=!0,e(s,a,c,l)):(l[i(s)]=!0,e(s,a,null,l))}}},plugins:{},highlight:function(e,t,a){var n={code:e,grammar:t,language:a};if(r.hooks.run("before-tokenize",n),!n.grammar)throw new Error('The language "'+n.language+'" has no grammar.');return n.tokens=r.tokenize(n.code,n.grammar),r.hooks.run("after-tokenize",n),l.stringify(r.util.encode(n.tokens),n.language)},tokenize:function(e,t){var a=t.rest;if(a){for(var n in a)t[n]=a[n];delete t.rest}var u=new c;return s(u,u.head,e),function e(t,a,n,c,u,m){for(var d in n)if(n.hasOwnProperty(d)&&n[d]){var h=n[d];h=Array.isArray(h)?h:[h];for(var p=0;p<h.length;++p){if(m&&m.cause==d+","+p)return;var v=h[p],f=v.inside,g=!!v.lookbehind,b=!!v.greedy,y=v.alias;if(b&&!v.pattern.global){var E=v.pattern.toString().match(/[imsuy]*$/)[0];v.pattern=RegExp(v.pattern.source,E+"g")}for(var w=v.pattern||v,x=c.next,k=u;x!==a.tail&&!(m&&k>=m.reach);k+=x.value.length,x=x.next){var N=x.value;if(a.length>t.length)return;if(!(N instanceof l)){var j,O=1;if(b){if(!(j=i(w,k,t,g))||j.index>=t.length)break;var S=j.index,C=j.index+j[0].length,M=k;for(M+=x.value.length;S>=M;)x=x.next,M+=x.value.length;if(M-=x.value.length,k=M,x.value instanceof l)continue;for(var T=x;T!==a.tail&&(M<C||"string"===typeof T.value);T=T.next)O++,M+=T.value.length;O--,N=t.slice(k,M),j.index-=k}else if(!(j=i(w,0,N,g)))continue;S=j.index;var F=j[0],D=N.slice(0,S),P=N.slice(S+F.length),q=k+N.length;m&&q>m.reach&&(m.reach=q);var I=x.prev;D&&(I=s(a,I,D),k+=D.length),o(a,I,O);var z=new l(d,f?r.tokenize(F,f):F,y,F);if(x=s(a,I,z),P&&s(a,x,P),O>1){var L={cause:d+","+p,reach:q};e(t,a,n,x.prev,k,L),m&&L.reach>m.reach&&(m.reach=L.reach)}}}}}}(e,u,t,u.head,0),function(e){var t=[],a=e.head.next;for(;a!==e.tail;)t.push(a.value),a=a.next;return t}(u)},hooks:{all:{},add:function(e,t){var a=r.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=r.hooks.all[e];if(a&&a.length)for(var n,l=0;n=a[l++];)n(t)}},Token:l};function l(e,t,a,n){this.type=e,this.content=t,this.alias=a,this.length=0|(n||"").length}function i(e,t,a,n){e.lastIndex=t;var r=e.exec(a);if(r&&n&&r[1]){var l=r[1].length;r.index+=l,r[0]=r[0].slice(l)}return r}function c(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function s(e,t,a){var n=t.next,r={value:a,prev:t,next:n};return t.next=r,n.prev=r,e.length++,r}function o(e,t,a){for(var n=t.next,r=0;r<a&&n!==e.tail;r++)n=n.next;t.next=n,n.prev=t,e.length-=r}return e.Prism=r,l.stringify=function e(t,a){if("string"==typeof t)return t;if(Array.isArray(t)){var n="";return t.forEach((function(t){n+=e(t,a)})),n}var l={type:t.type,content:e(t.content,a),tag:"span",classes:["token",t.type],attributes:{},language:a},i=t.alias;i&&(Array.isArray(i)?Array.prototype.push.apply(l.classes,i):l.classes.push(i)),r.hooks.run("wrap",l);var c="";for(var s in l.attributes)c+=" "+s+'="'+(l.attributes[s]||"").replace(/"/g,"&quot;")+'"';return"<"+l.tag+' class="'+l.classes.join(" ")+'"'+c+">"+l.content+"</"+l.tag+">"},r}(window));Q.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Q.languages.python["string-interpolation"].inside.interpolation.inside.rest=Q.languages.python,Q.languages.py=Q.languages.python;var X=Q,Y=(a(118),function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).pre=s.a.createRef(),r.state={min:Date.now()-r.props.timestamp>1e3&&!r.props.code.endsWith("|")},r.state.typing=!r.state.min,r}return Object(r.a)(a,[{key:"highlight",value:function(e){if(!this.state.typing){var t=e.indexOf("\n");-1===t?e+="   ":e=e.slice(0,t)+"   "+e.slice(t)}return X.highlight(e,X.languages.py)}},{key:"toggle",value:function(){var e,t,a=null!==(e=null===(t=this.props.python)||void 0===t?void 0:t.code)&&void 0!==e?e:this.props.code;this.state.min?this.pre.current.innerHTML=this.highlight(a):this.pre.current.innerHTML=this.highlight(a.slice(0,a.indexOf("\n"))),this.setState({min:!this.state.min})}},{key:"componentDidMount",value:function(){var e=this,t=this.pre.current;if(this.state.min)t.innerHTML=this.highlight(this.props.code.slice(0,this.props.code.indexOf("\n")));else{var a=0;setTimeout((function n(r){var l,i,c=document.getElementById("messages"),s=null!==(l=null===(i=e.props.python)||void 0===i?void 0:i.code)&&void 0!==l?l:e.props.code,o=s.endsWith("|");s=o?s.slice(0,-1):s;var u=Math.floor((Date.now()-a-e.props.timestamp)/48),m=!!c&&c.scrollTop>c.scrollHeight-c.offsetHeight-60;t.innerHTML=e.highlight(s.slice(0,u)),m&&(c.scrollTop=c.scrollHeight),u<s.length?(t.innerHTML+="\u258e",setTimeout(n,48)):o?(t.innerHTML+="&nbsp;",setTimeout((function(e){t.innerHTML=t.innerHTML.slice(0,-6)+"\u258e",a+=1e3,setTimeout(n,500)}),500)):setTimeout((function(t){e.setState({typing:!1}),e.toggle()}),500)}),48)}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"rcw-response"},s.a.createElement("div",null,!this.state.typing&&s.a.createElement("div",{style:{float:"right",position:"relative",top:"12px",right:"34px",padding:"0 4px",cursor:"pointer"},onClick:function(t){return e.toggle()}},s.a.createElement("i",{className:this.state.min?"bi bi-chevron-down":"bi bi-chevron-up"})),s.a.createElement("pre",{className:"rcw-message-text",ref:this.pre})))}}]),a}(s.a.Component)),Z=a(91),ee=a(79),te=a.n(ee),ae=a(80),ne=a.n(ae),re=a(81),le=a.n(re),ie=a(82),ce=a.n(ie),se=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).pre=s.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=te()({break:!0}).use(ne.a).use(le.a).use(ce.a,{attrs:{target:"_blank",rel:"noopener"}}),t=this.props.text,a=this.pre.current;if(Date.now()-this.props.timestamp>1e3)a.innerHTML=e.render(t);else{var n=1,r=t.length;setTimeout((function l(){if(n++<r){var i=document.getElementById("messages"),c=!!i&&i.scrollTop>i.scrollHeight-i.offsetHeight-20;a.innerHTML=e.render(t.slice(0,n)+"\u258e"),c&&(i.scrollTop=i.scrollHeight),setTimeout(l,16)}else a.innerHTML=e.render(t)}),16)}}},{key:"render",value:function(){return s.a.createElement("div",{className:"rcw-response"},s.a.createElement("div",{className:"rcw-message-text",ref:this.pre}),s.a.createElement("span",{className:"rcw-timestamp"},Object(Z.a)(this.props.timestamp,"d/M hh:mm a")))}}]),a}(s.a.Component),oe="\n\nVui l\xf2ng li\xean h\u1ec7 [AI Cafe\xb9](https://aicafe.one) \u0111\u1ec3 n\xe2ng c\u1ea5p t\xe0i kho\u1ea3n",ue="T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n kh\xf4ng th\u1ec3 truy c\u1eadp t\xednh n\u0103ng n\xe0y"+oe;function me(e){try{var t,a=JSON.parse(null!==(t=localStorage.getItem("chats"))&&void 0!==t?t:"[]");for(a.push(e);a.length;)try{return localStorage.setItem("chats",JSON.stringify(a))}catch(r){var n=a.findIndex((function(e){return JSON.stringify(e).length>5e3}));n<0?a.shift():a.splice(n,1)}}catch(l){}}function de(e){return function(e){return e<0?"-":""}(e)+Math.abs(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}var he=["AI Cafe\xb9","B\u1ea1n","Nh\u1edd AI","AI Cafe","AI"],pe=["ph\xe2n t\xedch","\u0111\xe1nh gi\xe1","nh\u1eadn \u0111\u1ecbnh"],ve=["gi\xf9m","gi\xfap","h\u1ed9","v\u1ec1","th\xeam v\u1ec1","s\xe2u h\u01a1n"];function fe(e){return e[Math.floor(Math.random()*e.length)]}var ge,be="",ye=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).enableInput=function(t){return e.setState({disable:!1})},e.disableInput=function(t){return e.setState({disable:!0})},e.handleNewUserMessage=function(t){var a=e.enableInput,n=e.disableInput;return Object(K.setQuickButtons)([]),p()?h.aichated>=h.aichat?Object(K.addResponseMessage)("B\u1ea1n \u0111\xe3 d\xf9ng h\u1ebft **".concat(de(h.aichat),"** tokens!").concat(oe)):(n(),Object(K.toggleMsgLoader)(),"string"===typeof t?me({prompt:t.replaceAll("\n","\n\n")}):(me({prompt:be+t.prompt.slice(9)+"?"}),t=JSON.stringify(t)),void y("aicafe/v1/app/aichat",{prompt:t}).then((function(e){return e.remain<0?(Object(K.toggleMsgLoader)(),Object(K.addResponseMessage)("B\u1ea1n \u0111\xe3 d\xf9ng h\u1ebft **".concat(de(h.aichat),"** tokens!").concat(oe))):e.text?(Object(K.toggleMsgLoader)(),a(),me(e.text),Object(K.addResponseMessage)(e.text)):void setTimeout((function n(){fetch(e.url).then((function(e){return e.json()})).then((function(e){function r(){if(e.images&&e.images.length){var t=e.images.map((function(e,t){return"![".concat(t,"](").concat(e,")")})).join("\n&nbsp;");me(t),Object(K.addResponseMessage)(t)}e.text&&(Object(K.toggleMsgLoader)(),me({text:e.text,timestamp:Date.now()}),Object(K.renderCustomComponent)(se,{text:e.text,timestamp:Date.now()},!0)),e.suggestions?(a(),e.suggestions.length>9&&Object(K.setQuickButtons)(e.suggestions.split("\n").filter((function(e){return e.length>3})).map((function(e){return e=e.trim(),".:".includes(e[1])&&(e=e.slice(3)),{label:e,value:e}})))):setTimeout(n,e.text?16*e.text.length+3e3:3e3)}if(e.code){var l=0;e.code.endsWith("|")?t?(l=t.code.length,t.code=e.code):(t={code:e.code,timestamp:Date.now()},Object(K.renderCustomComponent)(Y,Object(_.a)(Object(_.a)({},t),{},{python:t}),!0)):t?(l=t.code.length,t.code=e.code,me(t),t=!1):(Object(K.renderCustomComponent)(Y,{code:e.code,timestamp:Date.now()},!0),me({code:e.code,timestamp:Date.now()})),setTimeout(r,48*Math.max(e.code.length-l,62)+(e.images&&e.images.length?2e3:0))}else r()})).catch((function(e){setTimeout(n,3e3)}))}),3e3);var t})).catch((function(e){a(),Object(K.toggleMsgLoader)()}))):Object(K.addResponseMessage)(ue)},e.handleQuickButtonClicked=function(t){Object(K.addUserMessage)(t.replaceAll("\n","\n\n")),e.handleNewUserMessage(t)},e.changePrompt=function(t){e.text=t.target,e.updateText()},e.sendMessage=function(t){if(!e.state.disable&&e.state.prompt){var a=e.state.prompt.trim();e.text.value="",e.updateText(),e.handleQuickButtonClicked(a)}},e.state={},a.sendPrompt=function(t){Object(K.isWidgetOpened)()||Object(K.toggleWidget)(),be="".concat(fe(he)," ").concat(fe(pe)," ").concat(fe(ve)),Object(K.addUserMessage)(be+t.prompt.slice(9)+"?"),e.handleNewUserMessage(t)},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){Object(K.toggleInputDisabled)();var e=this.disableInput;try{var t=localStorage.getItem("chats");!t||JSON.parse(t).forEach((function(e){"string"===typeof e?Object(K.addResponseMessage)(e):e.prompt?Object(K.addUserMessage)(e.prompt):e.text?Object(K.renderCustomComponent)(se,e,!0):e.code&&Object(K.renderCustomComponent)(Y,e,!0)})),!t||Object(K.setBadgeCount)(0)}catch(a){}if(!p()||!h.aichat)return e(),Object(K.addResponseMessage)(ue),Object(K.setBadgeCount)(0);Object(K.addResponseMessage)("*Xin ch\xe0o,*\n\n*T\xf4i l\xe0 AI Cafe\xb9 Stock Analyst, t\xf4i c\xf3 th\u1ec3 gi\xfap b\u1ea1n ph\xe2n t\xedch d\u1eef li\u1ec7u ch\u1ee9ng kho\xe1n Vi\u1ec7t Nam.*\n\n*T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n c\xf2n **".concat(de(h.aichat-h.aichated),"** tokens!*")),Object(K.setQuickButtons)(["Ph\xe2n t\xedch returns c\u1ee7a VNINDEX","\u0110\xe1nh gi\xe1 r\u1ee7i ro VNINDEX theo returns","Clear"].map((function(e){return{label:e,value:e}})))}},{key:"updateText",value:function(){this.text.style.height=0;var e=Math.max(30,Math.min(this.text.scrollHeight,230));this.text.style.height="".concat(e,"px");var t=this.text.parentElement.querySelector("svg"),a=Math.max(6,(e>>1)-12);t.style.paddingBottom="".concat(a,"px"),t.style.height="".concat(a+32,"px"),document.querySelector(".rcw-sender .rcw-new-message").style.height="".concat(Math.max(46,e+10),"px"),this.state.prompt!==this.text.value&&this.setState({prompt:this.text.value})}},{key:"render",value:function(){var e=this,t=this.state.disable||!this.state.prompt;return s.a.createElement("div",{className:this.state.fs?"rcw-full":""},s.a.createElement(K.Widget,{handleNewUserMessage:this.handleNewUserMessage,handleQuickButtonClicked:this.handleQuickButtonClicked,title:s.a.createElement(s.a.Fragment,null,"AI Cafe\xb9 Stock Analyst",s.a.createElement("div",{className:"rwc-lines"},s.a.createElement("textarea",{placeholder:"Type a message...",style:{height:"30px"},disabled:this.state.disable,onChange:this.changePrompt,onFocus:this.changePrompt,defaultValue:this.state.prompt}),s.a.createElement("div",{style:{cursor:t?"default":"pointer"},onClick:this.sendMessage},s.a.createElement("svg",{style:{paddingBottom:"6px",height:"38px"},xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",width:"25px",viewBox:"0 0 535.5 535.5"},s.a.createElement("g",{id:"send"},s.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75",fill:t?"#cbcbcb":"#0d6efd"})))))),subtitle:s.a.createElement("div",{style:{cursor:"pointer"},onClick:function(t){return e.setState({fs:!e.state.fs})}},s.a.createElement("i",{className:this.state.fs?"bi bi-fullscreen-exit":"bi bi-fullscreen"})),profileAvatar:J.a,showTimeStamp:!1}))}}]),a}(s.a.Component),Ee=window,we=Ee.PortfolioAnalytics,xe=Ee.Plotly,ke=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.df;xe.newPlot(t,[{x:a.index,y:we.drawdownFunction(a.values).map((function(e){return-e})),fill:"tozeroy",line:{color:"#ff7f0e"}}],V())}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return s.a.createElement("div",{className:"card mb-3"},s.a.createElement("div",{className:"card-header"},"Drawdown"),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{id:this.props.id})))}}]),a}(P),Ne=window.dfd.DataFrame,je=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"volatility",value:function(e){var t=this.props.df,a=e.ticker,n=e.window;t instanceof Ne&&(a&&t.hasOwnProperty(a)||(a=t.columns[0],e.ticker=a),t=t[a]),t.dropnall({inplace:!0});var r=t.apply(Math.log);(t=new Ne(Object(S.a)({},t.columns[0],t.values),{index:t.index})).addColumn({values:r.sub([NaN].concat(r.values.slice(0,-1))),column:"returns",inplace:!0});var l=(new Date(t.index[t.index.length-1])-new Date(t.index[0]))/315576e5,i=Math.sqrt((t.index.length-1)/l);return t.addColumn({values:t.returns.rolling(n).apply((function(e){return e.std()*i})),column:"volatility",inplace:!0}),t.addColumn({values:t.returns.rolling(n).apply((function(e){return $(e.$data)*i})),column:"semi-deviation",inplace:!0}),e.df=t,e}},{key:"render",value:function(){var e=this,t=this.volatility(this.state),a=t.df.volatility,n=a.describe();return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},"\u0110\u1ed9 bi\u1ebfn \u0111\u1ed9ng",this.props.df instanceof Ne&&s.a.createElement(s.a.Fragment,null,"\xa0c\u1ee7a",s.a.createElement(W,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:t.ticker||this.props.df.columns[0],options:this.props.df.columns})),"\xa0trong",s.a.createElement("input",{className:"d-inline-flex ms-2 form-control",style:{width:"70px"},type:"number",value:t.window,onChange:function(t){return e.changeWindow(t)}}),"\xa0ng\xe0y",s.a.createElement("button",{type:"button",className:"btn text-primary float-end px-1",onClick:function(r){return ye.sendPrompt({prompt:"ph\xe2n t\xedch \u0111\u1ed9 bi\u1ebfn \u0111\u1ed9ng c\u1ee7a ".concat(e.props.df instanceof Ne?t.ticker||e.props.df.columns[0]:e.props.label||"danh m\u1ee5c"),data:["T\u1eeb ng\xe0y: ".concat(a.index[0]),"\u0110\u1ebfn ng\xe0y: ".concat(a.index[a.index.length-1])].concat(n.$index.map((function(e,t){return"".concat(e,": ").concat(+(100*n.$data[t]).toFixed(2),"%")})).slice(1))})}},s.a.createElement("img",{width:24,height:24,style:{marginTop:"-4px"},src:J.a,alt:"AI"})," Ph\xe2n t\xedch")),s.a.createElement("div",{className:"card-body"},t.df&&s.a.createElement(A,{id:this.props.id,df:t.df}))),t.df&&s.a.createElement("div",{className:"mt-3"},s.a.createElement(ke,{id:this.props.id+"Drawdown",df:t.df[t.df.columns[0]]})))}}]),a}(P),Oe=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id;e.sf.plot(t).hist({layout:V(this.props)})}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return s.a.createElement("div",{id:this.props.id})}}]),a}(s.a.Component),Se=a(29);function Ce(e){var t=e.ec,a=e.id,n=Object(c.useRef)(null),r=s.a.useState(0),l=Object(Se.a)(r,2),i=l[0],o=l[1];return Object(c.useEffect)((function(){t.plot(a).line({layout:V({yaxis:{type:"log"}})}),z(a);var e=setInterval((function(){var e=n.current,t=e.querySelector(".svg-container");t&&Math.abs(t.clientWidth-e.clientWidth)>9&&o(i+1)}),1e3);return function(){return clearInterval(e)}}),[t,a,i]),s.a.createElement("div",{id:a,ref:n})}function Me(){var e=s.a.useState([]),t=Object(Se.a)(e,2),a=t[0],n=t[1],r=s.a.useState(null),l=Object(Se.a)(r,2),i=l[0],o=l[1];Object(c.useEffect)((function(){if(a.length){for(var e,t=new window.dfd.DataFrame((e={},Object(S.a)(e,a[0].name,a[0].ec.values),Object(S.a)(e,"date",a[0].ec.index),e)),n=1;n<a.length;n++){var r,l=new window.dfd.DataFrame((r={},Object(S.a)(r,a[n].name,a[n].ec.values),Object(S.a)(r,"date",a[n].ec.index),r));t=window.dfd.merge({left:t,right:l,on:["date"]})}t=(t=t.set_index({column:"date",drop:!0})).div(t.values[0],{axis:1}),o(t)}else o(null)}),[a]);var u=Object(c.useRef)(null);return Object(c.useEffect)((function(){ge=function(e,t,r){e=e.replace("danh m\u1ee5c ","").replace(" ph\xe2n b\u1ed5 v\u1ed1n theo",":"),a.find((function(t){return t.name===e}))||(n([].concat(Object(q.a)(a),[{name:e,ec:t,stats:r}])),o(null)),new window.bootstrap.Modal(u.current).show()}}),[u,a]),s.a.createElement("div",{className:"modal fade",tabIndex:"-1","aria-hidden":"true",ref:u,style:{zIndex:99999}},s.a.createElement("div",{className:"modal-dialog ".concat(a.length?"modal-fullscreen":""," modal-dialog-scrollable")},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header justify-content-between"},s.a.createElement("h1",{className:"modal-title fs-3"},"So s\xe1nh"),s.a.createElement("div",{className:"p-1"},s.a.createElement("button",{type:"button",className:"btn text-danger",onClick:function(){return n([])},style:{marginTop:"-.25em"}},s.a.createElement("i",{className:"bi bi-trash"})),s.a.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"}))),s.a.createElement("div",{className:"modal-body"},a.length?s.a.createElement(s.a.Fragment,null,s.a.createElement("table",{className:"table table-borderless table-striped table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),a.map((function(e,t){return s.a.createElement("th",{key:t},s.a.createElement("button",{type:"button",className:"btn text-danger p-0 m-0",onClick:function(){return n(a.filter((function(t){return t!==e})))}},s.a.createElement("i",{className:"bi bi-x-lg"})),e.name)})))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"T\u1eeb ng\xe0y"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.ec.index[0])}))),s.a.createElement("tr",null,s.a.createElement("td",null,"\u0110\u1ebfn ng\xe0y"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.ec.index[e.ec.index.length-1])}))),s.a.createElement("tr",null,s.a.createElement("td",null,"T\u1ef7 l\u1ec7 t\u0103ng tr\u01b0\u1edfng h\xe0ng n\u0103m (CAGR)"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.stats.cagr,"%")}))),s.a.createElement("tr",null,s.a.createElement("td",null,"L\u1ee3i nhu\u1eadn trung b\xecnh n\u0103m"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.stats.returns,"%")}))),s.a.createElement("tr",null,s.a.createElement("td",null,"Bi\u1ebfn \u0111\u1ed9ng trung b\xecnh n\u0103m"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.stats.volatility,"%")}))),s.a.createElement("tr",null,s.a.createElement("td",null,"T\u1ef7 l\u1ec7 Sharpe"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.stats.sharpe)}))),s.a.createElement("tr",null,s.a.createElement("td",null,"Max Drawdown"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.stats.md,"%")}))),s.a.createElement("tr",null,s.a.createElement("td",null,"Max Drawdown Duration"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.stats.mdd," ng\xe0y")}))),s.a.createElement("tr",null,s.a.createElement("td",null,"\u0110\u1ed9 l\u1ec7ch (Skew)"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.stats.skew)}))),s.a.createElement("tr",null,s.a.createElement("td",null,"\u0110\u1ed9 nh\u1ecdn (Kurtosis)"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.stats.kurtosis)}))),s.a.createElement("tr",null,s.a.createElement("td",null,"Gi\xe1 tr\u1ecb ch\u1ecbu r\u1ee7i ro h\xe0ng ng\xe0y (VAR 95%)"),a.map((function(e,t){return s.a.createElement("td",{key:t},e.stats.var,"%")}))))),s.a.createElement("h4",{className:"mt-4"},"\u0110\u01b0\u1eddng cong v\u1ed1n"),i&&s.a.createElement(Ce,{id:"compare",ec:i})):"Vui l\xf2ng th\xeam m\xe3 ch\u1ee9ng kho\xe1n ho\u1eb7c danh m\u1ee5c \u0111\u1ec3 so s\xe1nh"))))}var Te=window.jStat,Fe=window.dfd.DataFrame,De=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"returns",value:function(e){var t=this.props.df,a=e.ticker||this.state.ticker;t instanceof Fe&&(a&&t.hasOwnProperty(a)||(a=t.columns[0],e.ticker=a),t=t[a]),t.dropnall({inplace:!0});var n=t.apply(Math.log);return e.df=t,e.returns=n.iloc(["1:"]).sub(n.values.slice(0,-1)),e}},{key:"render",value:function(){var e=this,t=this.returns(this.state),a=t.returns,n=t.df,r=t.ticker,l=(new Date(n.index[n.index.length-1])-new Date(n.index[0]))/315576e5,i=(n.index.length-1)/l,c={cagr:(100*Math.expm1(Math.log(n.values[n.values.length-1]/n.values[0])/l)).toFixed(2),returns:(a.mean()*i*100).toFixed(2),volatility:(a.std()*Math.sqrt(i)*100).toFixed(2),sharpe:(a.mean()/a.std()*Math.sqrt(i)).toFixed(2),md:H(n.values).toFixed(2),mdd:U(n.values),skew:Te.skewness(a.values).toFixed(2),kurtosis:Te.kurtosis(a.values).toFixed(2),var:(100*Te.percentile(a.values,.05)).toFixed(2)};return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},"L\u1ee3i nhu\u1eadn",this.props.df instanceof Fe&&s.a.createElement(s.a.Fragment,null,"\xa0c\u1ee7a",s.a.createElement(W,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:r||this.props.df.columns[0],options:this.props.df.columns})),s.a.createElement("button",{type:"button",className:"btn text-primary float-end px-1 ".concat(this.props.df instanceof Fe?"":"py-0"),onClick:function(t){return ye.sendPrompt({prompt:"ph\xe2n t\xedch l\u1ee3i nhu\u1eadn c\u1ee7a ".concat(e.props.df instanceof Fe?r||e.props.df.columns[0]:e.props.label||"danh m\u1ee5c"),data:["T\u1eeb ng\xe0y: ".concat(n.index[0]),"\u0110\u1ebfn ng\xe0y: ".concat(n.index[n.index.length-1]),"CAGR: ".concat(c.cagr,"%"),"L\u1ee3i nhu\u1eadn trung b\xecnh n\u0103m: ".concat(c.returns,"%"),"Bi\u1ebfn \u0111\u1ed9ng trung b\xecnh n\u0103m: ".concat(c.volatility,"%"),"Sharpe ratio: ".concat(c.sharpe),"Max Drawdown: ".concat(c.md,"%"),"Max Drawdown Duration: ".concat(c.mdd," ng\xe0y"),"Skewness: ".concat(c.skew),"Kurtosis: ".concat(c.kurtosis),"Daily VaR (95%): ".concat(c.var,"%")]})}},s.a.createElement("img",{width:24,height:24,style:{marginTop:"-4px"},src:J.a,alt:"AI"})," Ph\xe2n t\xedch"),s.a.createElement("button",{type:"button",className:"btn text-primary float-end px-1 ".concat(this.props.df instanceof Fe?"":"py-0"," me-2"),onClick:function(t){return ge(e.props.df instanceof Fe?r||e.props.df.columns[0]:e.props.short||"Danh m\u1ee5c",n,c)}},s.a.createElement("i",{className:"bi bi-plus-square"})," So s\xe1nh")),a?s.a.createElement("div",{className:"card-body row"},s.a.createElement("div",{className:"col-md-6 mt-4"},s.a.createElement("table",{className:"table table-borderless table-striped table-hover"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"T\u1eeb ng\xe0y"),s.a.createElement("td",null,n.index[0])),s.a.createElement("tr",null,s.a.createElement("td",null,"\u0110\u1ebfn ng\xe0y"),s.a.createElement("td",null,n.index[n.index.length-1])),s.a.createElement("tr",null,s.a.createElement("td",null,"T\u1ef7 l\u1ec7 t\u0103ng tr\u01b0\u1edfng h\xe0ng n\u0103m (CAGR)"),s.a.createElement("td",null,c.cagr,"%")),s.a.createElement("tr",null,s.a.createElement("td",null,"L\u1ee3i nhu\u1eadn trung b\xecnh n\u0103m"),s.a.createElement("td",null,c.returns,"%")),s.a.createElement("tr",null,s.a.createElement("td",null,"Bi\u1ebfn \u0111\u1ed9ng trung b\xecnh n\u0103m"),s.a.createElement("td",null,c.volatility,"%")),s.a.createElement("tr",null,s.a.createElement("td",null,"T\u1ef7 l\u1ec7 Sharpe"),s.a.createElement("td",null,c.sharpe)),s.a.createElement("tr",null,s.a.createElement("td",null,"Max Drawdown"),s.a.createElement("td",null,c.md,"%")),s.a.createElement("tr",null,s.a.createElement("td",null,"Max Drawdown Duration"),s.a.createElement("td",null,c.mdd," ng\xe0y")),s.a.createElement("tr",null,s.a.createElement("td",null,"\u0110\u1ed9 l\u1ec7ch (Skew)"),s.a.createElement("td",null,c.skew)),s.a.createElement("tr",null,s.a.createElement("td",null,"\u0110\u1ed9 nh\u1ecdn (Kurtosis)"),s.a.createElement("td",null,c.kurtosis)),s.a.createElement("tr",null,s.a.createElement("td",null,"Gi\xe1 tr\u1ecb ch\u1ecbu r\u1ee7i ro h\xe0ng ng\xe0y (VAR 95%)"),s.a.createElement("td",null,c.var,"%"))))),s.a.createElement("div",{className:"col-md-6"},s.a.createElement(Oe,{id:this.props.id,sf:a,title:"Ph\xe2n b\u1ed1 l\u1ee3i nhu\u1eadn"}))):"")}}]),a}(P),Pe=window,qe=Pe.jStat,Ie=Pe.Plotly,ze=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.x,n=e.y,r=qe.min(a),l=qe.max(a),i=qe(this.model?this.model.coef:[0,1]),c=[{x:a,y:n,mode:"markers",type:"scatter"},{x:[r,l],y:[i.dot([1,r]),i.dot([1,l])],mode:"lines"}];Ie.newPlot(t,c,V({showlegend:!1}))}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return this.model=qe.models.ols(this.props.y,this.props.x.map((function(e){return[1,e]}))),s.a.createElement(s.a.Fragment,null,s.a.createElement("h5",{className:"text-center my-3"},this.props.title),s.a.createElement("table",{className:"table table-borderless table-striped table-hover"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"coef"),s.a.createElement("td",null,this.model.coef.join(", "))),s.a.createElement("tr",null,s.a.createElement("td",null,"t test P-value"),s.a.createElement("td",null,this.model.t.p.join(", "))),s.a.createElement("tr",null,s.a.createElement("td",null,"f test P-value"),s.a.createElement("td",null,this.model.f.pvalue)),s.a.createElement("tr",null,s.a.createElement("td",null,"R2"),s.a.createElement("td",null,this.model.R2)))),s.a.createElement("div",{id:this.props.id}))}}]),a}(s.a.Component),Le=window.dfd.DataFrame,Ve=window.jStat,Ae=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"volatility",value:function(e){var t=this.props.df,a=e.ticker,n=e.window;t instanceof Le&&(a&&t.hasOwnProperty(a)||(a=t.columns[0],e.ticker=a),t=t[a]),t.dropnall({inplace:!0});for(var r=t.apply(Math.log),l=r.iloc(["1:"]).sub(r.values.slice(0,-1)).values,i=[],c=[],s=0,o=l.length;s<o;s+=n){var u=l.slice(s,s+n);i.push(Ve.mean(u)),c.push(Ve.stdev(u))}return e.retx=i.slice(0,-1),e.rety=i.slice(1),e.volx=c.slice(0,-1),e.voly=c.slice(1),e}},{key:"render",value:function(){var e=this,t=this.volatility(this.state);return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},"M\xf4 h\xecnh tuy\u1ebfn t\xednh d\u1ef1 b\xe1o",this.props.df instanceof Le&&s.a.createElement(s.a.Fragment,null,"\xa0cho",s.a.createElement(W,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:t.ticker||this.props.df.columns[0],options:this.props.df.columns})),"\xa0trong",s.a.createElement("input",{className:"d-inline-flex ms-2 form-control",style:{width:"70px"},type:"number",value:t.window,onChange:function(t){return e.changeWindow(t)}}),"\xa0ng\xe0y"),s.a.createElement("div",{className:"card-body row"},s.a.createElement("div",{className:"col-md-6"},t.retx&&s.a.createElement(ze,{id:this.props.id+"Ret",x:t.retx,y:t.rety,title:"D\u1ef1 b\xe1o l\u1ee3i nhu\u1eadn"})),s.a.createElement("div",{className:"col-md-6"},t.volx&&s.a.createElement(ze,{id:this.props.id+"Vol",x:t.volx,y:t.voly,title:"D\u1ef1 b\xe1o \u0111\u1ed9 bi\u1ebfn \u0111\u1ed9ng"}))))}}]),a}(P),_e=a(83),Re=a.n(_e),We=(a(183),a(54)),Be=a.n(We),He=a(84),Ue=a.n(He),$e=a(85),Ke=a(12);function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=function(o){Object(l.a)(m,o);var u=Object(i.a)(m);function m(){return Object(n.a)(this,m),u.apply(this,arguments)}return Object(r.a)(m,[{key:"render",value:function(){var n=new Ke.PivotData(this.props),r=n.getRowKeys(),l=n.getColKeys(),i=c?l:r;0===i.length&&i.push([]);var o=c?r:l;0===o.length&&o.push([]);var u=this.props.aggregatorName,m=this.props.aggregators[u]([])().numInputs||0;0!==m&&(u+=" of ".concat(this.props.vals.slice(0,m).join(", ")));var d=i.map((function(e){var a,r=[],l=[],i=Object($e.a)(o);try{for(i.s();!(a=i.n()).done;){var s=a.value,m=parseFloat(n.getAggregator(c?s:e,c?e:s).value());r.push(isFinite(m)?m:null),l.push(s.join("-")||" ")}}catch(h){i.e(h)}finally{i.f()}var d={name:e.join("-")||u};return"pie"===t.type?(d.values=r,d.labels=l.length>1?l:[u]):(d.x=c?r:l,d.y=c?l:r),Object.assign(d,t)})),h=u,p=c?this.props.rows.join("-"):this.props.cols.join("-"),v=c?this.props.cols.join("-"):this.props.rows.join("-");""!==p&&(h+=" vs ".concat(p)),""!==v&&(h+=" by ".concat(v));var f={title:h,hovermode:"closest",width:window.innerWidth*(window.innerWidth<768?.7:.6)-96,height:.6*window.innerHeight};if("pie"===t.type){var g=Math.ceil(Math.sqrt(d.length)),b=Math.ceil(d.length/g);f.grid={columns:g,rows:b},d.forEach((function(e,t){e.domain={row:Math.floor(t/g),column:t-g*Math.floor(t/g)},d.length>1&&(e.title=e.name)})),1===d[0].labels.length&&(f.showlegend=!1)}else f.xaxis={title:c?u:null,automargin:!0},f.yaxis={title:c?null:u,automargin:!0};return s.a.createElement(e,{data:d,layout:Object.assign(V(f),a,this.props.plotlyOptions),config:this.props.plotlyConfig,onUpdate:this.props.onRendererUpdate})}}]),m}(s.a.PureComponent);return o.defaultProps=Object.assign({},Ke.PivotData.defaultProps,{plotlyOptions:{},plotlyConfig:{}}),o}function Je(e){var t=function(t){Object(l.a)(c,t);var a=Object(i.a)(c);function c(){return Object(n.a)(this,c),a.apply(this,arguments)}return Object(r.a)(c,[{key:"render",value:function(){var t=new Ke.PivotData(this.props),a=t.getRowKeys(),n=t.getColKeys();0===a.length&&a.push([]),0===n.length&&n.push([]);var r={x:[],y:[],text:[],type:"scatter",mode:"markers"};a.forEach((function(e){n.forEach((function(a){var n=t.getAggregator(e,a).value();null!==n&&(r.x.push(a.join("-")),r.y.push(e.join("-")),r.text.push(n))}))}));var l={title:this.props.rows.join("-")+" vs "+this.props.cols.join("-"),hovermode:"closest",xaxis:{title:this.props.cols.join("-"),automargin:!0},yaxis:{title:this.props.rows.join("-"),automargin:!0},width:window.innerWidth*(window.innerWidth<768?.7:.6)-96,height:.6*window.innerHeight};return s.a.createElement(e,{data:[r],layout:Object.assign(l,this.props.plotlyOptions),config:this.props.plotlyConfig,onUpdate:this.props.onRendererUpdate})}}]),c}(s.a.PureComponent);return t.defaultProps=Object.assign({},Ke.PivotData.defaultProps,{plotlyOptions:{},plotlyConfig:{}}),t}var Qe=Ue()(window.Plotly);function Xe(e){var t=Math.min.apply(Math,e),a=Math.max.apply(Math,e);return function(e){if("dark"===document.querySelector("html").dataset.bsTheme)return e>0?{backgroundColor:"rgb(26,".concat(29+Math.round(155*e/a),",32)")}:e<0?{backgroundColor:"rgb(".concat(26+Math.round(229*e/t),",29,32)")}:{backgroundColor:"rgb(26,29,32)"};if(e>0){var n=255-Math.round(255*e/a);return{backgroundColor:"rgb("+n+",255,"+n+")"}}if(e<0){var r=255-Math.round(255*e/t);return{backgroundColor:"rgb(255,"+r+","+r+")"}}return{}}}var Ye,Ze=Object.assign({},Be.a,{"Grouped Column Chart":Ge(Ye=Qe,{type:"bar"},{barmode:"group"}),"Stacked Column Chart":Ge(Ye,{type:"bar"},{barmode:"relative"}),"Grouped Bar Chart":Ge(Ye,{type:"bar",orientation:"h"},{barmode:"group"},!0),"Stacked Bar Chart":Ge(Ye,{type:"bar",orientation:"h"},{barmode:"relative"},!0),"Line Chart":Ge(Ye),"Dot Chart":Ge(Ye,{mode:"markers"},{},!0),"Area Chart":Ge(Ye,{stackgroup:1}),"Scatter Chart":Je(Ye),"Multiple Pie Chart":Ge(Ye,{type:"pie",scalegroup:1,hoverinfo:"label+value",textinfo:"none"},{},!0)});function et(e){return isNaN(e)||!isFinite(e)?"":Math.abs(e)>=1e8?e.toExponential(2):(e<0?"-":"")+Math.floor(Math.abs(e.toFixed(2))).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+(Math.abs(e)%1).toFixed(2).replace(/0*$/,"").replace(/\.$/,"").substr(1)}function tt(e){return et(Math.exp(e))}function at(e){return et(100*Math.expm1(e))}Ke.aggregators["Exp Sum"]=Ke.aggregatorTemplates.sum(tt),Ke.aggregators["Exp Avg"]=Ke.aggregatorTemplates.average(tt),Ke.aggregators["Exp Stdev"]=Ke.aggregatorTemplates.stdev(1,tt),Ke.aggregators["Exp % Sum"]=Ke.aggregatorTemplates.sum(at),Ke.aggregators["Exp % Avg"]=Ke.aggregatorTemplates.average(at),Ke.aggregators["Exp % Stdev"]=Ke.aggregatorTemplates.stdev(1,at);var nt=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(Re.a,Object.assign({onChange:function(t){return e.setState(t)},renderers:Ze,tableColorScaleGenerator:Xe},this.props,this.state,{data:this.props.data}))}}]),a}(s.a.Component),rt=window.dfd,lt=rt.DataFrame,it=rt.Series,ct=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"seasonal",value:function(e){var t=this.props.df,a=e.ticker;t instanceof lt&&(a&&t.hasOwnProperty(a)||(a=t.columns[0],e.ticker=a),t=t[a]),t.dropnall({inplace:!0});var n=t.apply(Math.log);t=new lt({returns:n.iloc(["1:"]).sub(n.values.slice(0,-1)).values},{index:t.index.slice(1)});var r=new it(t.index).dt;return t.addColumn({values:r.year(),column:"year",inplace:!0}),t.addColumn({values:r.month().add(1),column:"month",inplace:!0}),t.addColumn({values:r.day().add(1),column:"day of week",inplace:!0}),t.addColumn({values:r.monthday(),column:"day of month",inplace:!0}),e.data=[t.columns].concat(t.values),e}},{key:"render",value:function(){var e=this,t=this.seasonal(this.state);return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header",style:{zIndex:2}},"Chu k\u1ef3 l\u1ee3i nhu\u1eadn",this.props.df instanceof lt&&s.a.createElement(s.a.Fragment,null,"\xa0c\u1ee7a",s.a.createElement(W,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:t.ticker||this.props.df.columns[0],options:this.props.df.columns}))),t.data&&s.a.createElement("div",{className:"card-body"},s.a.createElement(nt,{data:t.data,aggregatorName:"Exp % Sum",vals:["returns"],rows:["year"],cols:["month"],rendererName:"Table Heatmap"})))}}]),a}(P),st=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={width:r.props.width||0,timestep:50*(r.props.seconds||1.7)},r.timer=setTimeout((function(){return r.updateProgress()}),r.state.timestep),r}return Object(r.a)(a,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"updateProgress",value:function(){var e=this,t=this.state.width+5;t<100&&(this.setState({width:t}),this.timer=setTimeout((function(){return e.updateProgress()}),this.state.timestep))}},{key:"render",value:function(){return s.a.createElement("div",{className:"progress",style:{height:"2px"}},s.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:this.state.width+"%"}}))}}]),a}(s.a.Component),ot=a(86),ut=a.n(ot),mt=a(87),dt=a.n(mt);function ht(e){return ht[e]?new Promise((function(t){t(ht[e])})):fetch("https://vnqa.aicafe.one/".concat(e,".zip")).then((function(e){return e.blob()})).then(dt.a.loadAsync).then((function(t){return t.file(e+".csv").async("string").then((function(t){return new Promise((function(a){ut.a.parse(t,{skipEmptyLines:!0,worker:!0,complete:function(t){var n,r=t.data,l=r.shift().slice(1);n="vn"===e?r.map((function(e){return e.shift()})):r.map((function(e){return"".concat(+e.shift()+2e7).replace(/(\d{4})(\d{2})(\d{2})/g,"$1-$2-$3")}));var i=new window.dfd.DataFrame(r.map((function(e){return e.map((function(e){return+e||NaN}))})),{index:n,columns:l,config:{lowMemoryMode:!0}});ht[e]=i,a(i)}})}))}))})).catch((function(e){return console.log(e)}))}function pt(e){return 10===e?ft():ht("stocks")}function vt(e){return 10===e?ft():ht("indices")}function ft(){return ht("vn").then((function(e){return ht.indices=e,ht.stocks=e,e}))}var gt={indices:vt,stocks:pt};function bt(e){var t=e.com,a=e.type,n=s.a.useState(window.dataLength||5),r=Object(Se.a)(n,2),l=r[0],i=r[1];return s.a.createElement("div",{className:"dropdown text-primary fs-6"},s.a.createElement("div",{className:"dropdown-toggle p-1 show",role:"button","data-bs-toggle":"dropdown"},l," n\u0103m"),s.a.createElement("ul",{className:"dropdown-menu dropdown-menu-end shadow"},[5,10].map((function(e){return s.a.createElement("li",{key:e,onClick:function(){e!==l&&(i(e),window.dataLength=e,delete ht.indices,delete ht.stocks,t.setState({df:void 0}),gt[a](e).then((function(e){return t.setState({df:e})})))}},s.a.createElement("button",{className:"dropdown-item d-flex align-items-center ".concat(e===l?"active":"text-primary")},e," n\u0103m"))}))))}var yt=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={tab:window.tab},ht.indices&&(r.state.df=ht.indices),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.df||vt().then((function(t){return e.setState({df:t})}))}},{key:"render",value:function(){var e,t=this,a=this.state.tab;return window.tab=a,"rets"===a?e=s.a.createElement(De,{id:"marketRets",df:this.state.df}):"pred"===a?e=s.a.createElement(Ae,{id:"marketPred",df:this.state.df}):"ssn"===a?e=s.a.createElement(ct,{id:"marketSsn",df:this.state.df}):(a="vola",e=s.a.createElement(je,{id:"marketVola",df:this.state.df})),s.a.createElement("div",null,s.a.createElement("h2",{className:"d-flex justify-content-between align-items-center"},"Ph\xe2n t\xedch th\u1ecb tr\u01b0\u1eddng",s.a.createElement(bt,{com:this,type:"indices"})),s.a.createElement("hr",null),this.state.df?s.a.createElement(s.a.Fragment,null,s.a.createElement("ul",{className:"nav nav-tabs mb-3"},s.a.createElement("li",{className:"nav-item",onClick:function(){return"vola"===a||t.setState({tab:"vola"})}},s.a.createElement("button",{className:"vola"===a?"nav-link active":"nav-link"},"\u0110\u1ed9 bi\u1ebfn \u0111\u1ed9ng")),s.a.createElement("li",{className:"nav-item",onClick:function(){return"rets"===a||t.setState({tab:"rets"})}},s.a.createElement("button",{className:"rets"===a?"nav-link active":"nav-link"},"L\u1ee3i nhu\u1eadn")),s.a.createElement("li",{className:"nav-item",onClick:function(){return"pred"===a||t.setState({tab:"pred"})}},s.a.createElement("button",{className:"pred"===a?"nav-link active":"nav-link"},"D\u1ef1 b\xe1o")),s.a.createElement("li",{className:"nav-item",onClick:function(){return"ssn"===a||t.setState({tab:"ssn"})}},s.a.createElement("button",{className:"ssn"===a?"nav-link active":"nav-link"},"Chu k\u1ef3 l\u1ee3i nhu\u1eadn"))),e):s.a.createElement(st,{width:5,seconds:.1}))}}]),a}(s.a.Component),Et=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={tab:window.tab},ht.stocks&&(r.state.df=ht.stocks),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.df||pt().then((function(t){return e.setState({df:t})}))}},{key:"render",value:function(){var e,t=this,a=this.state.tab;return window.tab=a,"rets"===a?e=s.a.createElement(De,{id:"stocksRets",df:this.state.df}):"pred"===a?e=s.a.createElement(Ae,{id:"stocksPred",df:this.state.df}):"ssn"===a?e=s.a.createElement(ct,{id:"stocksSsn",df:this.state.df}):(a="vola",e=s.a.createElement(je,{id:"stocksVola",df:this.state.df})),s.a.createElement("div",null,s.a.createElement("h2",{className:"d-flex justify-content-between align-items-center"},"Ph\xe2n t\xedch c\u1ed5 phi\u1ebfu",s.a.createElement(bt,{com:this,type:"stocks"})),s.a.createElement("hr",null),this.state.df?s.a.createElement(s.a.Fragment,null,s.a.createElement("ul",{className:"nav nav-tabs mb-3"},s.a.createElement("li",{className:"nav-item",onClick:function(){return"vola"===a||t.setState({tab:"vola"})}},s.a.createElement("button",{className:"vola"===a?"nav-link active":"nav-link"},"\u0110\u1ed9 bi\u1ebfn \u0111\u1ed9ng")),s.a.createElement("li",{className:"nav-item",onClick:function(){return"rets"===a||t.setState({tab:"rets"})}},s.a.createElement("button",{className:"rets"===a?"nav-link active":"nav-link"},"L\u1ee3i nhu\u1eadn")),s.a.createElement("li",{className:"nav-item",onClick:function(){return"pred"===a||t.setState({tab:"pred"})}},s.a.createElement("button",{className:"pred"===a?"nav-link active":"nav-link"},"D\u1ef1 b\xe1o")),s.a.createElement("li",{className:"nav-item",onClick:function(){return"ssn"===a||t.setState({tab:"ssn"})}},s.a.createElement("button",{className:"ssn"===a?"nav-link active":"nav-link"},"Chu k\u1ef3 l\u1ee3i nhu\u1eadn"))),e):s.a.createElement(st,null))}}]),a}(s.a.Component),wt=a(92),xt=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"removeOption",value:function(e){e.stopPropagation();var t=e.target.parentNode.innerHTML;t=t.substring(0,t.indexOf("<")),window.confirm('B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 danh m\u1ee5c "'.concat(t,'"?'))&&this.props.onRemove(t)}},{key:"formatOptionLabel",value:function(e,t){var a=this;return"value"!==t.context&&e.value&&!e.__isNew__&&this.props.onRemove?s.a.createElement("div",{style:{overflow:"hidden"}},e.label,s.a.createElement("i",{role:"button",onClick:function(e){return a.removeOption(e)},className:"bi bi-x-lg float-end"})):e.label}},{key:"render",value:function(){var e=this;return s.a.createElement(wt.a,Object.assign({},this.props,{classNamePrefix:"vnqa",formatOptionLabel:function(t,a){return e.formatOptionLabel(t,a)}}))}}]),a}(s.a.Component),kt=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.rets;window.Plotly.newPlot(t,a.columns.map((function(e){return{y:a[e].values,type:"box",name:e}})),V()),a.cumsum().apply_map(Math.exp).plot(t+"Curve").line({layout:V({yaxis:{type:"log"}})}),z(t+"Curve")}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},"Kho\u1ea3ng l\u1ee3i nhu\u1eadn c\xe1c c\u1ed5 phi\u1ebfu th\xe0nh ph\u1ea7n"),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{id:this.props.id}))),s.a.createElement("div",{className:"card mt-3"},s.a.createElement("div",{className:"card-header"},"\u0110\u01b0\u1eddng cong l\u1ee3i nhu\u1eadn c\xe1c c\u1ed5 phi\u1ebfu th\xe0nh ph\u1ea7n"),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{id:this.props.id+"Curve"}))))}}]),a}(s.a.Component),Nt=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.weights;window.Plotly.newPlot(t,a.columns.map((function(e){return{x:a.index,y:a[e].values,stackgroup:"one",name:e}})),V())}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},"T\u1ef7 tr\u1ecdng t\u1eebng c\u1ed5 phi\u1ebfu th\xe0nh ph\u1ea7n"),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{id:this.props.id})))}}]),a}(s.a.Component);function jt(e){return e<0?"-":""}function Ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e?jt(e)+Math.floor(Math.abs(e)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,t):""}function St(e){return e>9?e.toString():"0"+e.toString()}function Ct(e,t,a){var n=t.index,r=t.values,l=n.indexOf(e.index[0]);l=-1===l?0:l;var i=e.values[0][0],c=r[l],s=i,o=[i];return e.index.slice(1).forEach((function(e){var t=n.indexOf(e,l);-1!==t&&(s=r[t]/c*i,l=t+1),o.push(s)})),e.addColumn({column:a||t.columns[0],values:o})}var Mt=window.dfd.DataFrame,Tt=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={ticker:""},ht.indices&&(r.state.df=ht.indices),r.getSettingsSync()?r.state.ticker=r.getSettingsSync("idx")||"":r.getSettings("idx",(function(e){return e&&e!==r.state.ticker&&r.setState({ticker:e})})),r}return Object(r.a)(a,[{key:"changeTicker",value:function(e){this.state.ticker!==e&&(this.saveSettings({idx:e}),this.setState({ticker:e}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.theory,n=t.ec,r=t.nc,l=t.id;n=new Mt({"M\xf4 ph\u1ecfng":n.values},{index:n.index}),r&&(n=Ct(n,r,"Ch\u01b0a ph\xed & thu\u1ebf")),n=Ct(n,a,"L\xfd thuy\u1ebft"),window.benchmark?n=Ct(n,window.benchmark):this.state.df?n=Ct(n,this.state.df[this.state.ticker]||this.state.df[this.state.df.columns[0]]):vt().then((function(t){return e.setState({df:t})})),n.plot(l).line({layout:V({yaxis:{type:"log"}})});var i=this.getSettingsSync("simPlot")||[];i.forEach((function(e){var t;(null===(t=document.getElementById(l).data)||void 0===t?void 0:t[e])&&(document.getElementById(l).data[e].visible="legendonly")})),!i.length||window.Plotly.redraw(l),z(l,(function(t){i.includes(t.curveNumber)?i.splice(i.indexOf(t.curveNumber),1):i.push(t.curveNumber),e.saveSettings({simPlot:i})}))}},{key:"componentDidUpdate",value:function(){this.componentDidMount()}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"card my-3"},s.a.createElement("div",{className:"card-header"},"\u0110\u01b0\u1eddng cong v\u1ed1n c\u1ee7a danh m\u1ee5c",this.state.df instanceof Mt&&s.a.createElement(s.a.Fragment,null,"\xa0so v\u1edbi",s.a.createElement(W,{className:"d-inline-flex ms-2",onChange:function(t){return e.changeTicker(t.value)},value:this.state.ticker||this.state.df.columns[0],options:this.state.df.columns}))),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{id:this.props.id}))))}}]),a}(F),Ft=a(55);function Dt(e){var t=e.columns,a=e.data,n=Object(Ft.useTable)({columns:t,data:a,initialState:{pageIndex:0}},Ft.usePagination),r=n.getTableProps,l=n.getTableBodyProps,i=n.headerGroups,c=n.prepareRow,o=n.page,u=n.canPreviousPage,m=n.canNextPage,d=n.pageCount,h=n.gotoPage,p=n.nextPage,v=n.previousPage,f=n.setPageSize,g=n.state,b=g.pageIndex,y=g.pageSize;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{overflowX:"scroll"}},s.a.createElement("table",r({className:"table table-bordered table-striped table-hover text-nowrap mb-0"}),s.a.createElement("thead",{className:"text-center"},i.map((function(e){return s.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return s.a.createElement("th",e.getHeaderProps(),e.render("Header"))})))}))),s.a.createElement("tbody",l(),o.map((function(e,t){return c(e),s.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return s.a.createElement("td",e.getCellProps({className:e.column.className}),e.render("Cell"))})))}))))),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row my-2"},s.a.createElement("div",{className:"pagination col-sm-4"},s.a.createElement(W,{className:"d-inline-flex",onChange:function(e){return f(Number(e.value))},value:y,options:[10,20,30,50,100]}),s.a.createElement("div",{className:"col-auto col-form-label"},"\xa0d\xf2ng/trang")),s.a.createElement("div",{className:"pagination col-sm-4 justify-content-center"},s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("input",{className:"form-control",style:{width:"80px"},type:"number",value:b+1,onChange:function(e){var t=e.target.value?Number(e.target.value):1;t=Math.max(1,Math.min(d,t)),h(t-1)}})),s.a.createElement("div",{className:"col-auto col-form-label"},"\xa0/ ",d)),s.a.createElement("div",{className:"pagination col-sm-4 justify-content-end",style:{paddingRight:0}},s.a.createElement("div",{onClick:function(){return h(0)},className:u?"page-item":"page-item disabled"},s.a.createElement("div",{role:"button",className:"page-link"},"<<")),s.a.createElement("div",{onClick:function(){return v()},className:u?"page-item":"page-item disabled"},s.a.createElement("div",{role:"button",className:"page-link"},"<")),s.a.createElement("div",{onClick:function(){return p()},className:m?"page-item":"page-item disabled"},s.a.createElement("div",{role:"button",className:"page-link"},">")),s.a.createElement("div",{onClick:function(){return h(d-1)},className:m?"page-item":"page-item disabled"},s.a.createElement("div",{role:"button",className:"page-link"},">>"))))))}var Pt=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.history,t=[{Header:"Ng\xe0y",accessor:"date"},{Header:"T\xe0i s\u1ea3n r\xf2ng",accessor:"nav",className:"text-end"}];return e.tickers.forEach((function(e){t.push({Header:e,columns:[{Header:"KL",accessor:e,className:"text-end"},{Header:"+/-",accessor:e+"_c",className:"text-end"},{Header:"Gi\xe1 tr\u1ecb",accessor:e+"_v",className:"text-end"}]})})),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"card my-3"},s.a.createElement("div",{className:"card-header"},"L\u1ecbch s\u1eed n\u1eafm gi\u1eef c\u1ee7a danh m\u1ee5c",s.a.createElement("button",{type:"button",className:"btn text-primary float-end px-1 py-0",onClick:function(){var a=t.map((function(e){return e.columns?e.columns.map((function(t){return Object(_.a)(Object(_.a)({},t),{},{Header:t.Header+"("+e.Header+")"})})):e})).flat();!function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("history.csv","".concat(a.map((function(e){return e.Header})).join(","),"\n").concat(e.map((function(e){return a.map((function(t){return'"'.concat(e[t.accessor],'"')})).join(",")})).join("\n"),"\n"))}},"Xu\u1ea5t Excel/CSV")),s.a.createElement("div",{className:"card-body"},s.a.createElement(Dt,{columns:t,data:e}))))}}]),a}(s.a.Component),qt=window.dfd.Series,It=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state=Object.assign({capital:1e3,reinvest:!0,buyFee:.15,sellFee:.25},r.getSettingsSync("simulation")||{}),r}return Object(r.a)(a,[{key:"simulate",value:function(e){var t=this.props.weights.dropna(0),a=this.props.prices,n=[],r=[],l=[],i=1e3*e.capital,c=0,s=t.columns,o=new Array(s.length).fill(0);e.minDate=t.index[0],e.maxDate=t.index[t.index.length-2],!e.start||e.start<e.minDate?e.start=e.minDate:e.start>e.maxDate&&(e.start=e.maxDate);for(var u=-1,m=function(){var m=t.index[d];if(m<e.start)return"continue";var h=o,p=a.values[a.index.indexOf(m,d)],v=o.reduce((function(e,t,a){return e+t*p[a]}),0)+i,f=new Date(m);if(!e.freq||1===e.freq&&(e.dow||0)+1===f.getDay()||2===e.freq&&(e.day||0)+1===f.getDate()||3===e.freq&&!(d%(e.period<1?1:Math.floor(e.period)))){-1===u&&(u=d);var g=e.reinvest?v:1e3*e.capital;o=t.values[d].map((function(e,t){var a=e*g/p[t];return Math.max(100*Math.floor(a/100),h[t])})),i=v-o.reduce((function(t,a,n){var r=a-h[n];return t+a*p[n]+r*p[n]*(r>0?e.buyFee:-e.sellFee)/100}),0),c+=v-o.reduce((function(e,t,a){return e+t*p[a]}),0)-i}if(-1===u)return"continue";if(!e.sfreq||1===e.sfreq&&(e.sdow||0)+1===f.getDay()||2===e.sfreq&&(e.sday||0)+1===f.getDate()||3===e.sfreq&&!(d%(e.speriod<1?1:Math.floor(e.speriod)))){var b=o,y=e.reinvest?v:1e3*e.capital;o=t.values[d].map((function(e,t){var a=e*y/p[t];return Math.min(100*Math.floor(a/100),b[t])})),i=v-o.reduce((function(t,a,n){var r=a-b[n];return t+a*p[n]+r*p[n]*(r>0?e.buyFee:-e.sellFee)/100}),0),c+=v-o.reduce((function(e,t,a){return e+t*p[a]}),0)-i}for(var E={date:m,nav:Ot(v*=1e3)},w=s.length-1;w>=0;w--){var x=s[w];E[x]=Ot(o[w]),E[x+"_c"]=Ot(o[w]-h[w]),E[x+"_v"]=Ot(o[w]*p[w]*1e3)}n.unshift(E),r.push(v),l.push(v+1e3*c)},d=0,h=t.index.length;d<h;d++)m();return n.tickers=s,e.simulation=n,e.ec=new qt(r,{index:t.index.slice(u)}),e.nc=new qt(l,{index:e.ec.index}),e}},{key:"changeCapital",value:function(e){e=(e=parseInt(e.target.value))>0?e:this.state.capital,this.saveSettings({simulation:{capital:e}}),this.setStateLazy({capital:e})}},{key:"changeBuyFee",value:function(e){(e=parseFloat(e.target.value)||0)!==this.state.buyFee&&(this.saveSettings({simulation:{buyFee:e}}),this.setStateLazy({buyFee:e}))}},{key:"changeSellFee",value:function(e){(e=parseFloat(e.target.value)||0)!==this.state.sellFee&&(this.saveSettings({simulation:{sellFee:e}}),this.setStateLazy({sellFee:e}))}},{key:"changeReinvest",value:function(e){this.setStateLazy({reinvest:e.target.checked})}},{key:"changeFreq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"freq";e=parseFloat(e.target.value)||0,this.saveSettings({simulation:Object(S.a)({},t,e)}),this.setStateLazy(Object(S.a)({},t,e))}},{key:"changeDate",value:function(e){var t=e.target.value;this.saveSettings({simulation:{start:t}}),this.setStateLazy({start:t})}},{key:"render",value:function(){var e=this;if(!this.state)return null;var t=this.simulate(this.state);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"px-3"},s.a.createElement("div",{className:"row mb-3"},s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"V\u1edbi")),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("input",{className:"form-control",style:{width:"100px"},type:"number",defaultValue:t.capital,onChange:function(t){return e.changeCapital(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"(tri\u1ec7u) v\u1ed1n \u0111\u1ea7u t\u01b0 v\xe0o ng\xe0y")),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("input",{className:"form-control",type:"date",value:t.start,min:t.minDate,max:t.maxDate,onChange:function(t){return e.changeDate(t)}})),s.a.createElement("div",{className:"col-auto ps-0"},s.a.createElement("label",{className:"col-form-label"},",")),s.a.createElement("div",{className:"col-auto px-0 py-2"},s.a.createElement("input",{role:"button",className:"form-check-input",type:"checkbox",id:"reinvest",defaultChecked:t.reinvest,onChange:function(t){return e.changeReinvest(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{role:"button",className:"col-form-label",htmlFor:"reinvest"},"t\xe1i \u0111\u1ea7u t\u01b0.")),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("label",{className:"col-form-label"},"Ph\xed v\xe0 thu\u1ebf\xa0")),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("input",{className:"form-control",style:{width:"64px"},defaultValue:t.buyFee,onChange:function(t){return e.changeBuyFee(t)}})),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("label",{className:"col-form-label"},"\xa0% khi mua, \xa0")),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("input",{className:"form-control",style:{width:"64px"},defaultValue:t.sellFee,onChange:function(t){return e.changeSellFee(t)}})),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("label",{className:"col-form-label"},"\xa0% khi b\xe1n.")),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"Mua")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:2}},s.a.createElement("select",{className:"form-select",defaultValue:t.freq,onChange:function(t){return e.changeFreq(t)}},s.a.createElement("option",{value:0},"h\xe0ng ng\xe0y"),s.a.createElement("option",{value:1},"h\xe0ng tu\u1ea7n"),s.a.createElement("option",{value:2},"h\xe0ng th\xe1ng"),s.a.createElement("option",{value:3},"sau m\u1ed7i"))),1===t.freq&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"v\xe0o")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},s.a.createElement("select",{className:"form-select",defaultValue:t.dow,onChange:function(t){return e.changeFreq(t,"dow")}},s.a.createElement("option",{value:0},"th\u1ee9 hai"),s.a.createElement("option",{value:1},"th\u1ee9 ba"),s.a.createElement("option",{value:2},"th\u1ee9 t\u01b0"),s.a.createElement("option",{value:3},"th\u1ee9 n\u0103m"),s.a.createElement("option",{value:4},"th\u1ee9 s\xe1u")))),2===t.freq&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"v\xe0o ng\xe0y")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},s.a.createElement("select",{className:"form-select",defaultValue:t.day,onChange:function(t){return e.changeFreq(t,"day")}},new Array(31).fill(0).map((function(e,t){return s.a.createElement("option",{value:t,key:t},t+1)}))))),3===t.freq&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-auto"},s.a.createElement("input",{className:"form-control",style:{width:"80px"},type:"number",defaultValue:t.period||1,onChange:function(t){return e.changeFreq(t,"period")}})),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("label",{className:"col-form-label"},"ng\xe0y."))),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},", b\xe1n")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:2}},s.a.createElement("select",{className:"form-select",defaultValue:t.sfreq,onChange:function(t){return e.changeFreq(t,"sfreq")}},s.a.createElement("option",{value:0},"h\xe0ng ng\xe0y"),s.a.createElement("option",{value:1},"h\xe0ng tu\u1ea7n"),s.a.createElement("option",{value:2},"h\xe0ng th\xe1ng"),s.a.createElement("option",{value:3},"sau m\u1ed7i"))),1===t.sfreq&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"v\xe0o")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},s.a.createElement("select",{className:"form-select",defaultValue:t.sdow,onChange:function(t){return e.changeFreq(t,"sdow")}},s.a.createElement("option",{value:0},"th\u1ee9 hai"),s.a.createElement("option",{value:1},"th\u1ee9 ba"),s.a.createElement("option",{value:2},"th\u1ee9 t\u01b0"),s.a.createElement("option",{value:3},"th\u1ee9 n\u0103m"),s.a.createElement("option",{value:4},"th\u1ee9 s\xe1u")))),2===t.sfreq&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"v\xe0o ng\xe0y")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},s.a.createElement("select",{className:"form-select",defaultValue:t.sday,onChange:function(t){return e.changeFreq(t,"sday")}},new Array(31).fill(0).map((function(e,t){return s.a.createElement("option",{value:t,key:t},t+1)}))))),3===t.sfreq&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-auto"},s.a.createElement("input",{className:"form-control",style:{width:"80px"},type:"number",defaultValue:t.speriod||1,onChange:function(t){return e.changeFreq(t,"speriod")}})),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("label",{className:"col-form-label"},"ng\xe0y."))))),s.a.createElement(Tt,{id:this.props.id+"Benchmark",theory:this.props.theory,ec:t.ec,nc:t.nc}),s.a.createElement(ke,{id:this.props.id+"Drawdown",df:t.ec}),s.a.createElement(De,{id:this.props.id+"Rets",df:t.ec,label:"m\xf4 ph\u1ecfng ".concat(this.props.label),short:"".concat(this.props.short,":SIM")}),s.a.createElement(Pt,{id:this.props.id+"History",history:t.simulation}))}}]),a}(F),zt=window,Lt=zt.jStat,Vt=zt.dfd,At=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={trial:30},r}return Object(r.a)(a,[{key:"simulate",value:function(e){for(var t,a=this.props.df,n=a.index.slice(),r=a.values.slice(),l=n.length,i=0,c=new Date(n[l-1]),s=(c.getUTCMonth()+2)%12;i<1260;)(c=new Date(c.getTime()+864e5)).getUTCDay()%6===0||c.getUTCMonth()===s&&c.getUTCDate()<14||(n.push("".concat((t=c).getUTCFullYear(),"-").concat(St(t.getUTCMonth()+1),"-").concat(St(t.getUTCDate()))),r.push(NaN),i++);for(var o=Lt.randn(e.trial,i),u=new Vt.DataFrame({"Qu\xe1 kh\u1ee9":r},{index:n}),m=a.index.map((function(e){return NaN})),d=a.apply(Math.log),h=d.sub([NaN].concat(d.values.slice(0,-1))).values.slice(2),p=Lt.mean(h),v=Lt.stdev(h),f=function(){var e=m.slice(),t=r[l-1];o[g].forEach((function(a){t*=Math.exp(a*v+p),e.push(t)})),u.addColumn({values:e,column:g.toString(),inplace:!0})},g=0;g<e.trial;g++)f();e.ec=u;var b=Lt(o).sumrow(),y=b.slice().sort((function(e,t){return e-t}));return e.stats=new Vt.DataFrame({min:u[b.indexOf(y[0]).toString()].values.slice(l),median:u[b.indexOf(y[e.trial>>1]).toString()].values.slice(l),max:u[b.indexOf(y[e.trial-1]).toString()].values.slice(l)},{index:n.slice(l)}),e}},{key:"calcRets",value:function(e){var t=e.apply(Math.log);return t.iloc(["1:"]).sub(t.values.slice(0,-1))}},{key:"render",value:function(){var e=this,t=this.simulate(this.state),a=t.stats,n=a.min,r=a.median,l=a.max;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"px-3"},s.a.createElement("div",{className:"row mb-3"},s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"M\xf4 ph\u1ecfng Monte Carlo v\u1edbi")),s.a.createElement("input",{className:"d-inline-flex ms-2 form-control",style:{width:"70px"},type:"number",value:t.trial,onChange:function(t){return e.setState({trial:parseInt(t.target.value)})},min:10}),"\xa0",s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"l\u1ea7n th\u1eed")))),s.a.createElement("div",{className:"card my-3"},s.a.createElement("div",{className:"card-header"},"Th\u1ed1ng k\xea hi\u1ec7u su\u1ea5t"),s.a.createElement("div",{className:"card-body row"},s.a.createElement("table",{className:"table table-borderless table-striped table-hover"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",null,"Tr\u01b0\u1eddng h\u1ee3p x\u1ea5u nh\u1ea5t"),s.a.createElement("th",null,"Tr\u01b0\u1eddng h\u1ee3p trung b\xecnh"),s.a.createElement("th",null,"Tr\u01b0\u1eddng h\u1ee3p t\u1ed1t nh\u1ea5t"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"T\u1eeb ng\xe0y"),s.a.createElement("td",null),s.a.createElement("td",null,n.index[0]),s.a.createElement("td",null)),s.a.createElement("tr",null,s.a.createElement("td",null,"\u0110\u1ebfn ng\xe0y"),s.a.createElement("td",null),s.a.createElement("td",null,n.index[n.index.length-1]),s.a.createElement("td",null)),s.a.createElement("tr",null,s.a.createElement("td",null,"T\u1ef7 l\u1ec7 t\u0103ng tr\u01b0\u1edfng h\xe0ng n\u0103m (CAGR)"),s.a.createElement("td",null,(100*Math.expm1(Math.log(n.values[n.values.length-1]/n.values[0])/5)).toFixed(2),"%"),s.a.createElement("td",null,(100*Math.expm1(Math.log(r.values[r.values.length-1]/r.values[0])/5)).toFixed(2),"%"),s.a.createElement("td",null,(100*Math.expm1(Math.log(l.values[l.values.length-1]/l.values[0])/5)).toFixed(2),"%")),s.a.createElement("tr",null,s.a.createElement("td",null,"Bi\u1ebfn \u0111\u1ed9ng trung b\xecnh n\u0103m"),s.a.createElement("td",null,(this.calcRets(n).std()*Math.sqrt(252)*100).toFixed(2),"%"),s.a.createElement("td",null,(this.calcRets(r).std()*Math.sqrt(252)*100).toFixed(2),"%"),s.a.createElement("td",null,(this.calcRets(l).std()*Math.sqrt(252)*100).toFixed(2),"%")),s.a.createElement("tr",null,s.a.createElement("td",null,"Max Drawdown"),s.a.createElement("td",null,H(n.values).toFixed(2),"%"),s.a.createElement("td",null,H(r.values).toFixed(2),"%"),s.a.createElement("td",null,H(l.values).toFixed(2),"%")),s.a.createElement("tr",null,s.a.createElement("td",null,"Max Drawdown Duration"),s.a.createElement("td",null,U(n.values)," ng\xe0y"),s.a.createElement("td",null,U(r.values)," ng\xe0y"),s.a.createElement("td",null,U(l.values)," ng\xe0y")))))),s.a.createElement("div",{className:"card my-3"},s.a.createElement("div",{className:"card-header"},"\u0110\u01b0\u1eddng cong m\xf4 ph\u1ecfng"),s.a.createElement("div",{className:"card-body"},s.a.createElement(Ce,{id:this.props.id,ec:t.ec}))))}}]),a}(F),_t=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={tab:window.tab},r}return Object(r.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state.tab;if(window.tab=a,"rets"===a)e=s.a.createElement(De,{id:this.props.id+"Rets",df:this.props.ec,label:this.props.label,short:this.props.short});else if("ssn"===a)e=s.a.createElement(ct,{id:this.props.id+"Ssn",df:this.props.ec,label:this.props.label});else if("box"===a){var n=this.props.ec.apply(Math.log);e=s.a.createElement(kt,{id:this.props.id+"Box",rets:this.props.rets.addColumn({column:"Danh m\u1ee5c",values:n.sub([0].concat(n.values.slice(0,-1)))})})}else"wi"===a?e=s.a.createElement(Nt,{id:this.props.id+"Wi",weights:this.props.weights}):"si"===a?e=s.a.createElement(It,{id:this.props.id+"Si",theory:this.props.ec,weights:this.props.weights,prices:this.props.prices,label:this.props.label,short:this.props.short}):"mc"===a?e=s.a.createElement(At,{id:this.props.id+"Mc",df:this.props.ec}):(a="vola",e=s.a.createElement(je,{id:this.props.id+"Vola",df:this.props.ec,label:this.props.label}));return s.a.createElement("div",null,s.a.createElement("ul",{className:"nav nav-tabs mb-3"},s.a.createElement("li",{className:"nav-item",onClick:function(){return"vola"===a||t.setState({tab:"vola"})}},s.a.createElement("button",{className:"vola"===a?"nav-link active":"nav-link"},"\u0110\u1ed9 bi\u1ebfn \u0111\u1ed9ng")),s.a.createElement("li",{className:"nav-item",onClick:function(){return"rets"===a||t.setState({tab:"rets"})}},s.a.createElement("button",{className:"rets"===a?"nav-link active":"nav-link"},"L\u1ee3i nhu\u1eadn")),s.a.createElement("li",{className:"nav-item",onClick:function(){return"ssn"===a||t.setState({tab:"ssn"})}},s.a.createElement("button",{className:"ssn"===a?"nav-link active":"nav-link"},"Chu k\u1ef3 l\u1ee3i nhu\u1eadn")),this.props.rets&&s.a.createElement("li",{className:"nav-item",onClick:function(){return"box"===a||t.setState({tab:"box"})}},s.a.createElement("button",{className:"box"===a?"nav-link active":"nav-link"},"C\u1ed5 phi\u1ebfu th\xe0nh ph\u1ea7n")),this.props.weights&&s.a.createElement("li",{className:"nav-item",onClick:function(){return"wi"===a||t.setState({tab:"wi"})}},s.a.createElement("button",{className:"wi"===a?"nav-link active":"nav-link"},"T\u1ef7 tr\u1ecdng")),this.props.weights&&s.a.createElement("li",{className:"nav-item",onClick:function(){return"si"===a||t.setState({tab:"si"})}},s.a.createElement("button",{className:"si"===a?"nav-link active":"nav-link"},"M\xf4 ph\u1ecfng")),this.props.weights&&s.a.createElement("li",{className:"nav-item",onClick:function(){return"mc"===a||t.setState({tab:"mc"})}},s.a.createElement("button",{className:"mc"===a?"nav-link active":"nav-link"},"Monte Carlo"))),e)}}]),a}(s.a.Component),Rt=window,Wt=Rt.jStat,Bt=Rt.dfd;function Ht(e){return e?e.map((function(e){return{value:e,label:e}})).filter((function(e){return"string"===typeof e.value})):[]}var Ut=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;if(Object(n.a)(this,a),(r=t.call(this,e)).getSettingsSync()){var l=r.getSettingsSync();r.state={portfolio:l.portfolio,portfolios:l.portfolios,tickers:Ht(l.portfolio?l.portfolios[l.portfolio]:l.tickers)}}else r.setStateLazy({tickers:[]},5),r.getSettings(0,(function(e){r.setStateLazy({portfolio:e.portfolio,portfolios:e.portfolios,tickers:Ht(e.portfolio?e.portfolios[e.portfolio]:e.tickers)},5)}));return ht.stocks&&(r.state=Object.assign({df:ht.stocks},r.state||{})),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state&&this.state.df||pt().then((function(t){return e.state?e.setState({df:t}):e.setStateLazy({df:t},5)}))}},{key:"equityCurve",value:function(e){var t=e.tickers.map((function(e){return e.value})),a=!1;if(e.df&&(t=t.filter((function(t){return e.df.columns.includes(t)}))),t.length&&e.df){e.prices=e.df.loc({columns:t});var n=e.prices.apply_map(Math.log).dropna(0),r=n.sub(new Bt.DataFrame([n.values[0]].concat(n.values.slice(0,-1)),{columns:n.$columns}));e.rets=r;var l=1/n.$columns.length;e.weights=r.apply_map((function(){return l})),(r=r.apply_map(Math.exp).apply(Wt.mean,{axis:0})).values[0]=1,a=r.dropna().cumprod()}return e.ec=a,e}},{key:"changeTickers",value:function(e){var t=this.state.portfolios;this.state.portfolio?(t[this.state.portfolio]=e.map((function(e){return e.value})),this.saveSettings({portfolios:t})):this.saveSettings({tickers:e.map((function(e){return e.value}))}),this.setStateLazy({tickers:e,portfolios:t},Math.min(3e3,100*e.length))}},{key:"changePortfolio",value:function(e){if(e.value!==this.state.portfolio)if(e.__isNew__){var t=this.state.portfolios||{};t[e.value]=[],this.saveSettings({portfolio:e.value,portfolios:t}),this.setState({portfolio:e.value,tickers:[],portfolios:t})}else this.saveSettings({portfolio:e.value}),this.setState({portfolio:e.value,tickers:Ht(e.value?this.state.portfolios[e.value]:this.getSettingsSync("tickers"))})}},{key:"removePortfolio",value:function(e){var t=this.state.portfolios;delete t[e],e===this.state.portfolio?(this.saveSettings({portfolio:void 0,portfolios:Object(S.a)({},e,void 0)}),this.setState({portfolio:void 0,tickers:Ht(this.getSettingsSync("tickers")),portfolios:Object(_.a)({},t)})):(this.saveSettings({portfolios:Object(S.a)({},e,void 0)}),this.setState({portfolios:Object(_.a)({},t)}))}},{key:"renderPortfolio",value:function(e){var t=this,a=[{label:"M\u1eb7c \u0111\u1ecbnh"}];e.portfolios&&(a=a.concat(Object.keys(e.portfolios).filter((function(t){return!!e.portfolios[t]})).map((function(e){return{value:e,label:e}}))));var n=e.portfolio?{value:e.portfolio,label:e.portfolio}:a[0];return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"Danh m\u1ee5c")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:4,minWidth:120}},s.a.createElement(xt,{options:a,value:[n],onChange:function(e){return t.changePortfolio(e)},onRemove:function(e){return t.removePortfolio(e)}})),s.a.createElement("div",{className:"col-auto",style:{zIndex:3}},s.a.createElement(W,{className:"",onChange:function(e){return t.changeTickers(e)},defaultValue:e.tickers,key:e.portfolio,options:e.df.columns,isMulti:!0})))}},{key:"render",value:function(){if(!this.state)return null;var e=this.equityCurve(this.state);return s.a.createElement("div",null,s.a.createElement("h2",{className:"d-flex justify-content-between align-items-center"},"Danh m\u1ee5c Equal Weight",s.a.createElement(bt,{com:this,type:"stocks"})),s.a.createElement("hr",null),e.df?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row mb-3"},this.renderPortfolio(e)),e.ec&&s.a.createElement(_t,{id:"eqw",ec:e.ec,rets:e.rets,weights:e.weights,prices:e.prices,label:"danh m\u1ee5c ".concat(e.tickers.map((function(e){return e.value})).join(",")," ph\xe2n b\u1ed5 v\u1ed1n theo equal weight"),short:"".concat(e.portfolio||"",":EW")})):s.a.createElement(st,null))}}]),a}(F),$t=window,Kt=$t.jStat,Gt=$t.dfd,Jt=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getSettingsSync()?r.state=Object.assign({volTarget:15,window:20},r.getSettingsSync("iv")||{},r.state||{}):(r.setStateLazy({volTarget:15,window:20},5),r.getSettings("iv",(function(e){return e&&r.setStateLazy(e,5)}))),r}return Object(r.a)(a,[{key:"equityCurve",value:function(e){var t=e.tickers.map((function(e){return e.value})),a=!1;if(e.df&&(t=t.filter((function(t){return e.df.columns.includes(t)}))),t.length&&e.df){e.prices=e.df.loc({columns:t});var n=e.prices.apply_map(Math.log).dropna(0),r=n.sub(new Gt.DataFrame([n.values[0]].concat(n.values.slice(0,-1)),{columns:n.$columns}));e.rets=r;var l=e.volTarget/r.columns.length/Math.sqrt(252e4),i=r.rolling(e.window).apply((function(e){return e.std().values.map((function(e){return e?l/e:0}))}));e.weights=i,i=new Gt.DataFrame([i.values[0]].concat(Object(q.a)(i.values.slice(0,-1))),i),(r=r.apply_map(Math.expm1).mul(i).apply(Kt.sum,{axis:0}).dropna().add(1)).values[0]=1,a=r.cumprod()}return e.ec=a,e}},{key:"changeVolTarget",value:function(e){e=(e=parseFloat(e.target.value))>1?e:this.state.volTarget,this.saveSettings({iv:{volTarget:e}}),this.setStateLazy({volTarget:e})}},{key:"changeWindow",value:function(e){e=(e=parseInt(e.target.value))>1?e:this.state.window,this.saveSettings({iv:{window:e}}),this.setStateLazy({window:e})}},{key:"render",value:function(){var e=this;if(!this.state)return null;var t=this.equityCurve(this.state);return s.a.createElement("div",null,s.a.createElement("h2",{className:"d-flex justify-content-between align-items-center"},"Inverse Volatility",s.a.createElement(bt,{com:this,type:"stocks"})),s.a.createElement("hr",null),t.df?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row mb-3"},this.renderPortfolio(t),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"v\u1edbi \u0111\u1ed9 bi\u1ebfn \u0111\u1ed9ng")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},s.a.createElement("input",{className:"form-control",style:{width:"80px"},type:"number",defaultValue:t.volTarget,onChange:function(t){return e.changeVolTarget(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"% trong")),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("input",{className:"form-control",style:{width:"70px"},type:"number",defaultValue:t.window,onChange:function(t){return e.changeWindow(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"ng\xe0y"))),t.ec&&s.a.createElement(_t,{id:"eqw",ec:t.ec,rets:t.rets,weights:t.weights,prices:t.prices,label:"danh m\u1ee5c ".concat(t.tickers.map((function(e){return e.value})).join(",")," ph\xe2n b\u1ed5 v\u1ed1n theo inverse volatility"),short:"".concat(t.portfolio||"",":IV")})):s.a.createElement(st,null))}}]),a}(Ut),Qt=window,Xt=Qt.jStat,Yt=Qt.PortfolioAllocation,Zt=Qt.dfd,ea=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getSettingsSync()?r.state=Object.assign({volTarget:15,window:20},r.getSettingsSync("erc")||{},r.state||{}):(r.setStateLazy({volTarget:15,window:20},5),r.getSettings("erc",(function(e){return e&&r.setStateLazy(e,5)}))),r}return Object(r.a)(a,[{key:"equityCurve",value:function(e){var t=e.tickers.map((function(e){return e.value})),a=!1;if(e.df&&(t=t.filter((function(t){return e.df.columns.includes(t)}))),t.length&&e.df){e.prices=e.df.loc({columns:t});var n=e.prices.apply_map(Math.log).dropna(0),r=n.sub(new Zt.DataFrame([n.values[0]].concat(n.values.slice(0,-1)),{columns:n.$columns}));e.rets=r;var l=e.volTarget/Math.sqrt(252e4),i=r.rolling(e.window).apply((function(e){for(var t=e.columns.length,a=Xt.zeros(t),n=0;n<t;n++)for(var r=e[e.columns[n]].values,i=0;i<=n;i++){var c=e[e.columns[i]].values;a[n][i]=a[i][n]=Xt.covariance(r,c)}try{var s=Yt.equalRiskContributionWeights(a,{outputPortfolioVolatility:!0});return s[0].map((function(e){return e*l/s[1]}))}catch(o){return new Array(t).fill(0)}}));e.weights=i,i=new Zt.DataFrame([i.values[0]].concat(Object(q.a)(i.values.slice(0,-1))),i),(r=r.apply_map(Math.expm1).mul(i).apply(Xt.sum,{axis:0}).dropna().add(1)).values[0]=1,a=r.cumprod()}return e.ec=a,e}},{key:"changeVolTarget",value:function(e){e=(e=parseFloat(e.target.value))>1?e:this.state.volTarget,this.saveSettings({erc:{volTarget:e}}),this.setStateLazy({volTarget:e})}},{key:"changeWindow",value:function(e){e=(e=parseInt(e.target.value))>1?e:this.state.window,this.saveSettings({erc:{window:e}}),this.setStateLazy({window:e})}},{key:"render",value:function(){var e=this;if(!this.state)return null;var t=this.equityCurve(this.state);return s.a.createElement("div",null,s.a.createElement("h2",{className:"d-flex justify-content-between align-items-center"},"Equal Risk Contributions",s.a.createElement(bt,{com:this,type:"stocks"})),s.a.createElement("hr",null),t.df?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row mb-3"},this.renderPortfolio(t),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"v\u1edbi \u0111\u1ed9 bi\u1ebfn \u0111\u1ed9ng")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},s.a.createElement("input",{className:"form-control",style:{width:"80px"},type:"number",defaultValue:t.volTarget,onChange:function(t){return e.changeVolTarget(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"% trong")),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("input",{className:"form-control",style:{width:"70px"},type:"number",defaultValue:t.window,onChange:function(t){return e.changeWindow(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"ng\xe0y"))),t.ec&&s.a.createElement(_t,{id:"eqw",ec:t.ec,rets:t.rets,weights:t.weights,prices:t.prices,label:"danh m\u1ee5c ".concat(t.tickers.map((function(e){return e.value})).join(",")," ph\xe2n b\u1ed5 v\u1ed1n theo equal risk contributions"),short:"".concat(t.portfolio||"",":ERC")})):s.a.createElement(st,null))}}]),a}(Ut),ta=window,aa=ta.jStat,na=ta.PortfolioAllocation,ra=ta.dfd,la=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getSettingsSync()?r.state=Object.assign({volTarget:15,window:20},r.getSettingsSync("mvo")||{},r.state||{}):(r.setStateLazy({volTarget:15,window:20},5),r.getSettings("mvo",(function(e){return e&&r.setStateLazy(e,5)}))),r}return Object(r.a)(a,[{key:"equityCurve",value:function(e){var t=e.tickers.map((function(e){return e.value})),a=!1;if(e.df&&(t=t.filter((function(t){return e.df.columns.includes(t)}))),t.length&&e.df){e.prices=e.df.loc({columns:t});var n=e.prices.apply_map(Math.log).dropna(0),r=n.sub(new ra.DataFrame([n.values[0]].concat(n.values.slice(0,-1)),{columns:n.$columns}));e.rets=r;var l=e.volTarget/Math.sqrt(252e4),i=r.rolling(e.window).apply((function(e){for(var t=e.columns.length,a=Array(t),n=aa.zeros(t),r=0;r<t;r++){var i=e[e.columns[r]].values;a[r]=aa.mean(i);for(var c=0;c<=r;c++){var s=e[e.columns[c]].values;n[r][c]=n[c][r]=aa.covariance(i,s)}}try{var o=na.meanVarianceEfficientFrontierPortfolios(a,n,{}),u=0,m=0;return o.forEach((function(e,t){var a=e[1]/e[2];a>u&&(u=a,m=t)})),o[m][0].map((function(e){return e*l/o[m][2]}))}catch(d){return new Array(t).fill(0)}}));e.weights=i,i=new ra.DataFrame([i.values[0]].concat(Object(q.a)(i.values.slice(0,-1))),i),(r=r.apply_map(Math.expm1).mul(i).apply(aa.sum,{axis:0}).dropna().add(1)).values[0]=1,a=r.cumprod()}return e.ec=a,e}},{key:"changeVolTarget",value:function(e){e=(e=parseFloat(e.target.value))>1?e:this.state.volTarget,this.saveSettings({mvo:{volTarget:e}}),this.setStateLazy({volTarget:e})}},{key:"changeWindow",value:function(e){e=(e=parseInt(e.target.value))>1?e:this.state.window,this.saveSettings({mvo:{window:e}}),this.setStateLazy({window:e})}},{key:"render",value:function(){var e=this;if(!this.state)return null;var t=this.equityCurve(this.state);return s.a.createElement("div",null,s.a.createElement("h2",{className:"d-flex justify-content-between align-items-center"},"Mean-Variance Optimization",s.a.createElement(bt,{com:this,type:"stocks"})),s.a.createElement("hr",null),t.df?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row mb-3"},this.renderPortfolio(t),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"v\u1edbi \u0111\u1ed9 bi\u1ebfn \u0111\u1ed9ng")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},s.a.createElement("input",{className:"form-control",style:{width:"80px"},type:"number",defaultValue:t.volTarget,onChange:function(t){return e.changeVolTarget(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"% trong")),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("input",{className:"form-control",style:{width:"70px"},type:"number",defaultValue:t.window,onChange:function(t){return e.changeWindow(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"ng\xe0y"))),t.ec&&s.a.createElement(_t,{id:"eqw",ec:t.ec,rets:t.rets,weights:t.weights,prices:t.prices,label:"danh m\u1ee5c ".concat(t.tickers.map((function(e){return e.value})).join(",")," ph\xe2n b\u1ed5 v\u1ed1n theo mean-variance optimization"),short:"".concat(t.portfolio||"",":MVO")})):s.a.createElement(st,null))}}]),a}(Ut),ia=a(46),ca=a(88),sa=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).keyDown=function(t){if(e.player)switch(t.which){case 32:return e.playPause(),t.preventDefault();case 37:return e.player.seekTo(e.player.getCurrentTime()-5),t.preventDefault();case 39:return e.player.seekTo(e.player.getCurrentTime()+5),t.preventDefault();case 38:var a=e.player.getAvailablePlaybackRates(),n=a.indexOf(e.player.getPlaybackRate());return n<a.length-1&&e.player.setPlaybackRate(a[n+1]),t.preventDefault();case 40:var r=e.player.getAvailablePlaybackRates(),l=r.indexOf(e.player.getPlaybackRate());return l>0&&e.player.setPlaybackRate(r[l-1]),t.preventDefault()}},e}return Object(r.a)(a,[{key:"onReady",value:function(e){this.player=e.target,this.player.playVideo()}},{key:"playPause",value:function(){this.player&&(1!==this.player.getPlayerState()?this.player.playVideo():this.player.pauseVideo())}},{key:"fullScreen",value:function(){var e=document.getElementById("yt_player");document.fullscreenElement||document.webkitFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen({navigationUI:"hide"}):e.webkitRequestFullScreen({navigationUI:"hide"})}},{key:"render",value:function(){var e=this,t=window.innerWidth>=992?.66:window.innerWidth>=768?.8:1,a=window.navigator.userAgent,n=a.includes("iPhone;")&&!a.includes("iOS/")?1:0;return s.a.createElement("div",{id:"yt_player",style:{height:Math.round(.5625*t*window.innerWidth)},tabIndex:0,onKeyDown:this.keyDown},s.a.createElement(ca.a,{videoId:this.props.vid[1],opts:{width:"100%",height:"100%",playerVars:{showinfo:0,modestbranding:1,rel:0,autoplay:1,fs:n,disablekb:1}},onReady:function(t){return e.onReady(t)}}),s.a.createElement("div",{className:"mask",onClick:function(t){return e.playPause()},onDoubleClick:this.fullScreen}),!n&&s.a.createElement("div",{className:"controls"},s.a.createElement("div",{className:"btn",onClick:this.fullScreen},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",viewBox:"0 0 24 24",width:"30px",fill:"#fff"},s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),s.a.createElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})))))}}]),a}(s.a.Component),oa=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;if(Object(n.a)(this,a),(r=t.call(this,e)).state={list:v(),video:0},!r.state.list)return Object(ia.a)(r);if(r.getSettingsSync()){var l=r.getSettingsSync("video");l<r.state.list.length&&(r.state.video=l)}else r.getSettings("video",(function(e){e&&e!==r.state.video&&e<r.state.list.length&&r.setState({video:e})}));return r}return Object(r.a)(a,[{key:"changeVideo",value:function(e){this.state.video!==e&&(this.saveSettings({video:e}),this.setState({video:e}))}},{key:"render",value:function(){var e=this;return this.state.list?s.a.createElement("div",null,s.a.createElement("h2",null,f()),s.a.createElement("hr",null),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-md-3 col-lg-2"},s.a.createElement("ul",{className:"nav nav-pills flex-column"},this.state.list.map((function(t,a){return s.a.createElement("li",{className:"nav-item",onClick:function(){return e.changeVideo(a)},key:a},s.a.createElement("a",{className:e.state.video===a?"nav-link active":"nav-link",href:"#/videos"},t[0]))})))),s.a.createElement("div",{className:"col-12 col-md-9 col-lg-10"},s.a.createElement(sa,{vid:this.state.list[this.state.video]})))):null}}]),a}(F),ua=window,ma=ua.jStat,da=ua.dfd,ha=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getSettingsSync()?r.state=Object.assign({volTarget:15,window:20},r.getSettingsSync("iv")||{},r.state||{}):(r.setStateLazy({volTarget:15,window:20},5),r.getSettings("iv",(function(e){return e&&r.setStateLazy(e,5)}))),r}return Object(r.a)(a,[{key:"equityCurve",value:function(e){var t=e.tickers.map((function(e){return e.value})),a=!1;if(e.df&&(t=t.filter((function(t){return e.df.columns.includes(t)}))),t.length&&e.df){e.prices=e.df.loc({columns:t});var n=e.prices.apply_map(Math.log).dropna(0),r=n.sub(new da.DataFrame([n.values[0]].concat(n.values.slice(0,-1)),{columns:n.$columns}));e.rets=r;var l=e.volTarget/r.columns.length/Math.sqrt(252e4)/2,i=r.rolling(e.window).apply((function(e){return e.columns.map((function(t){var a=$(e[t].$data);return a?l/a:0}))}));e.weights=i,i=new da.DataFrame([i.values[0]].concat(Object(q.a)(i.values.slice(0,-1))),i),(r=r.apply_map(Math.expm1).mul(i).apply(ma.sum,{axis:0}).dropna().add(1)).values[0]=1,a=r.cumprod()}return e.ec=a,e}},{key:"changeVolTarget",value:function(e){e=(e=parseFloat(e.target.value))>1?e:this.state.volTarget,this.saveSettings({iv:{volTarget:e}}),this.setStateLazy({volTarget:e})}},{key:"changeWindow",value:function(e){e=(e=parseInt(e.target.value))>1?e:this.state.window,this.saveSettings({iv:{window:e}}),this.setStateLazy({window:e})}},{key:"render",value:function(){var e=this;if(!this.state)return null;var t=this.equityCurve(this.state);return s.a.createElement("div",null,s.a.createElement("h2",{className:"d-flex justify-content-between align-items-center"},"Inverse Semi-Deviation",s.a.createElement(bt,{com:this,type:"stocks"})),s.a.createElement("hr",null),t.df?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row mb-3"},this.renderPortfolio(t),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"v\u1edbi \u0111\u1ed9 bi\u1ebfn \u0111\u1ed9ng")),s.a.createElement("div",{className:"col-auto px-0",style:{zIndex:3}},s.a.createElement("input",{className:"form-control",style:{width:"80px"},type:"number",defaultValue:t.volTarget,onChange:function(t){return e.changeVolTarget(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"% trong")),s.a.createElement("div",{className:"col-auto px-0"},s.a.createElement("input",{className:"form-control",style:{width:"70px"},type:"number",defaultValue:t.window,onChange:function(t){return e.changeWindow(t)}})),s.a.createElement("div",{className:"col-auto"},s.a.createElement("label",{className:"col-form-label"},"ng\xe0y"))),t.ec&&s.a.createElement(_t,{id:"eqw",ec:t.ec,rets:t.rets,weights:t.weights,prices:t.prices,label:"danh m\u1ee5c ".concat(t.tickers.map((function(e){return e.value})).join(",")," ph\xe2n b\u1ed5 v\u1ed1n theo inverse semi-deviation"),short:"".concat(t.portfolio||"",":ISD")})):s.a.createElement(st,null))}}]),a}(Ut),pa=[{icon:"circle-half",title:"T\u1ef1 \u0111\u1ed9ng"},{icon:"sun-fill",title:"S\xe1ng"},{icon:"moon-stars-fill",title:"T\u1ed1i"}];function va(e){var t=e.dark,a=e.onChange;return s.a.createElement("div",{className:"dropdown text-primary"},s.a.createElement("div",{className:"dropdown-toggle p-2 show",role:"button","data-bs-toggle":"dropdown"},s.a.createElement("i",{className:"bi bi-".concat(pa[t].icon)})),s.a.createElement("ul",{className:"dropdown-menu dropdown-menu-end shadow"},[1,2,0].map((function(e){return s.a.createElement("li",{key:e,onClick:function(){return a(e)}},s.a.createElement("button",{className:"dropdown-item d-flex align-items-center ".concat(e===+t?"active":"text-primary")},s.a.createElement("i",{className:"bi bi-".concat(pa[e].icon)}),s.a.createElement("span",{className:"mx-2"},pa[e].title)))}))))}var fa=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(e){var r;Object(n.a)(this,a);var l=!0,i=0;if((r=t.call(this,e)).getSettingsSync()){var c=r.getSettingsSync();l=!c.collapse,c.dark&&(i=c.dark)}return r.state={menu:window.innerWidth>=768,expand:l,dark:i},r}return Object(r.a)(a,[{key:"toggleMenu",value:function(){window.innerWidth<768&&this.setState({menu:!this.state.menu})}},{key:"render",value:function(){var e=this,t=this.state,a=t.menu,n=t.expand,r=t.dark,l=r?!(r-1):!window.matchMedia||!matchMedia("(prefers-color-scheme: dark)").matches,i=l?"light":"dark";return document.querySelector("html").dataset.bsTheme=i,n=n||window.innerWidth<768,s.a.createElement(o.a,null,a&&s.a.createElement("div",{className:"menu d-flex flex-column flex-shrink-0 p-".concat(n?3:2," bg-").concat(i,"-subtle"),style:window.innerWidth<768?{position:"fixed",zIndex:9,width:"100%",height:"100%"}:{width:n?"20%":"64px"}},window.innerWidth<768?s.a.createElement("div",null,s.a.createElement("div",{className:"btn fs-5",onClick:function(){return e.toggleMenu()}},s.a.createElement("i",{className:"bi bi-x-circle"}),"\xa0\xa0AI Cafe\xb9")):s.a.createElement("div",{className:n?"d-flex align-items-center":""},s.a.createElement("a",{href:"/",className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto link-".concat(l?"dark":"light"," text-decoration-none").concat(n?"":" p-2")},s.a.createElement("img",{src:"https://vnqa.aicafe.one/favicon.ico",width:"32",height:"32",alt:"AI Cafe\xb9"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0",s.a.createElement("span",{className:"fs-4"},"AI Cafe\xb9"))),s.a.createElement(va,{dark:r,onChange:function(t){e.saveSettings({dark:t}),e.setState({dark:t})}})),s.a.createElement("hr",null),s.a.createElement("ul",{className:"nav nav-pills flex-column mb-auto",onClick:function(){return e.toggleMenu()}},s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/",exact:!0,className:"nav-link"},s.a.createElement("i",{className:"bi bi-graph-up-arrow"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 Th\u1ecb tr\u01b0\u1eddng"))),s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/stocks",className:"nav-link"},s.a.createElement("i",{className:"bi bi-bar-chart"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 C\u1ed5 phi\u1ebfu"))),s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/portfolio",className:"nav-link"},s.a.createElement("i",{className:"bi bi-pie-chart"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 Danh m\u1ee5c",s.a.createElement(N,null)))),s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/inverse-volatility",className:"nav-link"},s.a.createElement("i",{className:"bi bi-asterisk"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 Inverse volatility",s.a.createElement(N,null)))),s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/inverse-semi-dev",className:"nav-link"},s.a.createElement("i",{className:"bi bi-layers-half"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 Inverse semi-dev",s.a.createElement(N,null)))),s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/erc",className:"nav-link"},s.a.createElement("i",{className:"bi bi-view-stacked"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 ERC",s.a.createElement(N,null)))),s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/mvo",className:"nav-link"},s.a.createElement("i",{className:"bi bi-grid-1x2"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 MVO",s.a.createElement(N,null)))),f()&&s.a.createElement("li",{className:"nav-item"},s.a.createElement(o.b,{to:"/videos",className:"nav-link"},s.a.createElement("i",{className:"bi bi-collection-play"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 ",f()))),s.a.createElement("li",{className:"nav-item"},s.a.createElement("a",{className:"nav-link",target:"_blank",rel:"noopener noreferrer",href:"https://aicafe.one/phantichchungkhoan/"},s.a.createElement("i",{className:"bi bi-info-circle"}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 Kho\xe1 h\u1ecdc")))),window.innerWidth>=768&&s.a.createElement("ul",{className:"nav nav-pills flex-column"},s.a.createElement("li",{className:"nav-item"},s.a.createElement("div",{className:"nav-link",onClick:function(){e.saveSettings({collapse:n}),e.setState({expand:!n})}},s.a.createElement("i",{className:"bi bi-arrow-".concat(n?"left":"right","-circle-fill")}),n&&s.a.createElement(s.a.Fragment,null,"\xa0 Thu nh\u1ecf")))),s.a.createElement("hr",null),s.a.createElement(O,{expand:n,light:l})),s.a.createElement("div",null,s.a.createElement(Me,null)),s.a.createElement("div",{style:window.innerWidth<768?{overflowY:"scroll"}:{overflowY:"scroll",width:n?"80%":"calc(100% - 64px)"}},s.a.createElement("div",{className:"px-3 py-3",style:{minHeight:"calc(100vh - 4em)"}},window.innerWidth<768&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},s.a.createElement("h1",{onClick:function(){return e.toggleMenu()},style:{cursor:"pointer"}},s.a.createElement("i",{className:"bi bi-list"}),"\xa0",s.a.createElement("span",null,"AI Cafe\xb9")),s.a.createElement(va,{dark:r,onChange:function(t){e.saveSettings({dark:t}),e.setState({dark:t})}})),s.a.createElement("hr",null)),s.a.createElement(u.c,null,s.a.createElement(u.a,{path:"/stocks"},s.a.createElement(Et,null)),s.a.createElement(u.a,{path:"/portfolio"},s.a.createElement(j,{com:Ut})),s.a.createElement(u.a,{path:"/inverse-volatility"},s.a.createElement(j,{com:Jt})),s.a.createElement(u.a,{path:"/inverse-semi-dev"},s.a.createElement(j,{com:ha})),s.a.createElement(u.a,{path:"/erc"},s.a.createElement(j,{com:ea})),s.a.createElement(u.a,{path:"/mvo"},s.a.createElement(j,{com:la})),s.a.createElement(u.a,{path:"/videos"},s.a.createElement(oa,null)),s.a.createElement(u.a,{path:"/"},s.a.createElement(yt,null)))),s.a.createElement("footer",{className:"bd-footer py-3"},s.a.createElement("div",{className:"px-3 d-flex flex-wrap"},s.a.createElement("div",{className:"col-md-8 d-flex align-items-center fst-italic"},"*L\u01b0u \xfd: Website n\xe0y l\xe0 \u1ee9ng d\u1ee5ng ph\xe2n t\xedch d\u1eef li\u1ec7u, kh\xf4ng khuy\u1ebfn ngh\u1ecb \u0111\u1ea7u t\u01b0. Ch\xfang t\xf4i kh\xf4ng ch\u1ecbu tr\xe1ch nhi\u1ec7m tr\u01b0\u1edbc m\u1ecdi r\u1ee7i ro n\xe0o do s\u1eed d\u1ee5ng website n\xe0y."),s.a.createElement("ul",{className:"nav col-md-4 justify-content-end list-unstyled d-flex"},s.a.createElement("li",null,s.a.createElement("a",{href:"https://aicafe.one/",className:"text-decoration-none text-reset"},"Copyright \xa9 2021-",(new Date).getFullYear()," AI Cafe\xb9")),s.a.createElement("li",{className:"ms-3"},s.a.createElement("a",{href:"https://aicafe.one/privacy-policy/",className:"text-decoration-none text-reset"},"Privacy policy"))))),s.a.createElement(ye,null)))}}]),a}(F);d.a.render(s.a.createElement(fa,null),document.getElementById("root"))},53:function(e,t,a){e.exports=a.p+"static/media/robot.6d18f5be.svg"},93:function(e,t,a){e.exports=a(210)},98:function(e,t,a){},99:function(e,t,a){a(100),a(101)}},[[93,1,2]]]);